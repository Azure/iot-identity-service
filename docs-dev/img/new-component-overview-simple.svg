<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1293px" preserveAspectRatio="none" style="width:998px;height:1293px;" version="1.1" viewBox="0 0 998 1293" width="998px" zoomAndPan="magnify"><defs><filter height="300%" id="f18thyhabak4vn" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="259" x="375.5" y="16.708">Data Flow - new architecture</text><!--cluster DPS Service--><path d="M447,628.9531 C447,625.9531 449,623.9531 452,623.9531 C455,623.9531 457,625.9531 457,628.9531 C457,625.9531 459,623.9531 462,623.9531 C465,623.9531 467,625.9531 467,628.9531 C467,625.9531 469,623.9531 472,623.9531 C475,623.9531 477,625.9531 477,628.9531 C477,625.9531 479,623.9531 482,623.9531 C485,623.9531 487,625.9531 487,628.9531 C487,625.9531 489,623.9531 492,623.9531 C495,623.9531 497,625.9531 497,628.9531 C497,625.9531 499,623.9531 502,623.9531 C505,623.9531 507,625.9531 507,628.9531 C507,625.9531 509,623.9531 512,623.9531 C515,623.9531 517,625.9531 517,628.9531 C517,625.9531 519,623.9531 522,623.9531 C525,623.9531 527,625.9531 527,628.9531 C527,625.9531 529,623.9531 532,623.9531 C535,623.9531 537,625.9531 537,628.9531 C537,625.9531 539,623.9531 542,623.9531 C545,623.9531 547,625.9531 547,628.9531 C547,625.9531 549,623.9531 552,623.9531 C555,623.9531 557,625.9531 557,628.9531 C557,625.9531 559,623.9531 562,623.9531 C565,623.9531 567,625.9531 567,628.9531 C567,625.9531 569,623.9531 572,623.9531 C575,623.9531 577,625.9531 577,628.9531 C577,625.9531 579,623.9531 582,623.9531 C585,623.9531 587,625.9531 587,628.9531 C590,628.9531 592,630.9531 592,633.9531 C592,636.9531 590,638.9531 587,638.9531 C590,638.9531 592,640.9531 592,643.9531 C592,646.9531 590,648.9531 587,648.9531 C590,648.9531 592,650.9531 592,653.9531 C592,656.9531 590,658.9531 587,658.9531 C590,658.9531 592,660.9531 592,663.9531 C592,666.9531 590,668.9531 587,668.9531 C590,668.9531 592,670.9531 592,673.9531 C592,676.9531 590,678.9531 587,678.9531 C590,678.9531 592,680.9531 592,683.9531 C592,686.9531 590,688.9531 587,688.9531 C590,688.9531 592,690.9531 592,693.9531 C592,696.9531 590,698.9531 587,698.9531 C590,698.9531 592,700.9531 592,703.9531 C592,706.9531 590,708.9531 587,708.9531 C590,708.9531 592,710.9531 592,713.9531 C592,716.9531 590,718.9531 587,718.9531 C590,718.9531 592,720.9531 592,723.9531 C592,726.9531 590,728.9531 587,728.9531 C590,728.9531 592,730.9531 592,733.9531 C592,736.9531 590,738.9531 587,738.9531 C587,741.9531 584,743.9531 582,743.9531 C579,743.9531 577,741.9531 577,738.9531 C577,741.9531 574,743.9531 572,743.9531 C569,743.9531 567,741.9531 567,738.9531 C567,741.9531 564,743.9531 562,743.9531 C559,743.9531 557,741.9531 557,738.9531 C557,741.9531 554,743.9531 552,743.9531 C549,743.9531 547,741.9531 547,738.9531 C547,741.9531 544,743.9531 542,743.9531 C539,743.9531 537,741.9531 537,738.9531 C537,741.9531 534,743.9531 532,743.9531 C529,743.9531 527,741.9531 527,738.9531 C527,741.9531 524,743.9531 522,743.9531 C519,743.9531 517,741.9531 517,738.9531 C517,741.9531 514,743.9531 512,743.9531 C509,743.9531 507,741.9531 507,738.9531 C507,741.9531 504,743.9531 502,743.9531 C499,743.9531 497,741.9531 497,738.9531 C497,741.9531 494,743.9531 492,743.9531 C489,743.9531 487,741.9531 487,738.9531 C487,741.9531 484,743.9531 482,743.9531 C479,743.9531 477,741.9531 477,738.9531 C477,741.9531 474,743.9531 472,743.9531 C469,743.9531 467,741.9531 467,738.9531 C467,741.9531 464,743.9531 462,743.9531 C459,743.9531 457,741.9531 457,738.9531 C457,741.9531 454,743.9531 452,743.9531 C449,743.9531 447,741.9531 447,738.9531 C444,738.9531 442,736.9531 442,733.9531 C442,730.9531 444,728.9531 447,728.9531 C444,728.9531 442,726.9531 442,723.9531 C442,720.9531 444,718.9531 447,718.9531 C444,718.9531 442,716.9531 442,713.9531 C442,710.9531 444,708.9531 447,708.9531 C444,708.9531 442,706.9531 442,703.9531 C442,700.9531 444,698.9531 447,698.9531 C444,698.9531 442,696.9531 442,693.9531 C442,690.9531 444,688.9531 447,688.9531 C444,688.9531 442,686.9531 442,683.9531 C442,680.9531 444,678.9531 447,678.9531 C444,678.9531 442,676.9531 442,673.9531 C442,670.9531 444,668.9531 447,668.9531 C444,668.9531 442,666.9531 442,663.9531 C442,660.9531 444,658.9531 447,658.9531 C444,658.9531 442,656.9531 442,653.9531 C442,650.9531 444,648.9531 447,648.9531 C444,648.9531 442,646.9531 442,643.9531 C442,640.9531 444,638.9531 447,638.9531 C444,638.9531 442,636.9531 442,633.9531 C442,630.9531 444,628.9531 447,628.9531 " fill="#FFFFFF" filter="url(#f18thyhabak4vn)" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="468.5" y="647.9482">DPS Service</text><!--cluster PKI--><path d="M295,628.9531 C295,625.9531 297,623.9531 300,623.9531 C303,623.9531 305,625.9531 305,628.9531 C305,625.9531 307,623.9531 310,623.9531 C313,623.9531 315,625.9531 315,628.9531 C315,625.9531 317,623.9531 320,623.9531 C323,623.9531 325,625.9531 325,628.9531 C325,625.9531 327,623.9531 330,623.9531 C333,623.9531 335,625.9531 335,628.9531 C335,625.9531 337,623.9531 340,623.9531 C343,623.9531 345,625.9531 345,628.9531 C345,625.9531 347,623.9531 350,623.9531 C353,623.9531 355,625.9531 355,628.9531 C355,625.9531 357,623.9531 360,623.9531 C363,623.9531 365,625.9531 365,628.9531 C365,625.9531 367,623.9531 370,623.9531 C373,623.9531 375,625.9531 375,628.9531 C375,625.9531 377,623.9531 380,623.9531 C383,623.9531 385,625.9531 385,628.9531 C385,625.9531 387,623.9531 390,623.9531 C393,623.9531 395,625.9531 395,628.9531 C395,625.9531 397,623.9531 400,623.9531 C403,623.9531 405,625.9531 405,628.9531 C405,625.9531 407,623.9531 410,623.9531 C413,623.9531 415,625.9531 415,628.9531 C418,628.9531 420,630.9531 420,633.9531 C420,636.9531 418,638.9531 415,638.9531 C418,638.9531 420,640.9531 420,643.9531 C420,646.9531 418,648.9531 415,648.9531 C418,648.9531 420,650.9531 420,653.9531 C420,656.9531 418,658.9531 415,658.9531 C418,658.9531 420,660.9531 420,663.9531 C420,666.9531 418,668.9531 415,668.9531 C418,668.9531 420,670.9531 420,673.9531 C420,676.9531 418,678.9531 415,678.9531 C418,678.9531 420,680.9531 420,683.9531 C420,686.9531 418,688.9531 415,688.9531 C418,688.9531 420,690.9531 420,693.9531 C420,696.9531 418,698.9531 415,698.9531 C418,698.9531 420,700.9531 420,703.9531 C420,706.9531 418,708.9531 415,708.9531 C418,708.9531 420,710.9531 420,713.9531 C420,716.9531 418,718.9531 415,718.9531 C418,718.9531 420,720.9531 420,723.9531 C420,726.9531 418,728.9531 415,728.9531 C418,728.9531 420,730.9531 420,733.9531 C420,736.9531 418,738.9531 415,738.9531 C415,741.9531 412,743.9531 410,743.9531 C407,743.9531 405,741.9531 405,738.9531 C405,741.9531 402,743.9531 400,743.9531 C397,743.9531 395,741.9531 395,738.9531 C395,741.9531 392,743.9531 390,743.9531 C387,743.9531 385,741.9531 385,738.9531 C385,741.9531 382,743.9531 380,743.9531 C377,743.9531 375,741.9531 375,738.9531 C375,741.9531 372,743.9531 370,743.9531 C367,743.9531 365,741.9531 365,738.9531 C365,741.9531 362,743.9531 360,743.9531 C357,743.9531 355,741.9531 355,738.9531 C355,741.9531 352,743.9531 350,743.9531 C347,743.9531 345,741.9531 345,738.9531 C345,741.9531 342,743.9531 340,743.9531 C337,743.9531 335,741.9531 335,738.9531 C335,741.9531 332,743.9531 330,743.9531 C327,743.9531 325,741.9531 325,738.9531 C325,741.9531 322,743.9531 320,743.9531 C317,743.9531 315,741.9531 315,738.9531 C315,741.9531 312,743.9531 310,743.9531 C307,743.9531 305,741.9531 305,738.9531 C305,741.9531 302,743.9531 300,743.9531 C297,743.9531 295,741.9531 295,738.9531 C292,738.9531 290,736.9531 290,733.9531 C290,730.9531 292,728.9531 295,728.9531 C292,728.9531 290,726.9531 290,723.9531 C290,720.9531 292,718.9531 295,718.9531 C292,718.9531 290,716.9531 290,713.9531 C290,710.9531 292,708.9531 295,708.9531 C292,708.9531 290,706.9531 290,703.9531 C290,700.9531 292,698.9531 295,698.9531 C292,698.9531 290,696.9531 290,693.9531 C290,690.9531 292,688.9531 295,688.9531 C292,688.9531 290,686.9531 290,683.9531 C290,680.9531 292,678.9531 295,678.9531 C292,678.9531 290,676.9531 290,673.9531 C290,670.9531 292,668.9531 295,668.9531 C292,668.9531 290,666.9531 290,663.9531 C290,660.9531 292,658.9531 295,658.9531 C292,658.9531 290,656.9531 290,653.9531 C290,650.9531 292,648.9531 295,648.9531 C292,648.9531 290,646.9531 290,643.9531 C290,640.9531 292,638.9531 295,638.9531 C292,638.9531 290,636.9531 290,633.9531 C290,630.9531 292,628.9531 295,628.9531 " fill="#FFFFFF" filter="url(#f18thyhabak4vn)" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="343.5" y="647.9482">PKI</text><!--cluster IoT Hub Service--><path d="M223,51.9531 C223,48.9531 225,46.9531 228,46.9531 C231,46.9531 233,48.9531 233,51.9531 C233,48.9531 235,46.9531 238,46.9531 C241,46.9531 243,48.9531 243,51.9531 C243,48.9531 245,46.9531 248,46.9531 C251,46.9531 253,48.9531 253,51.9531 C253,48.9531 255,46.9531 258,46.9531 C261,46.9531 263,48.9531 263,51.9531 C263,48.9531 265,46.9531 268,46.9531 C271,46.9531 273,48.9531 273,51.9531 C273,48.9531 275,46.9531 278,46.9531 C281,46.9531 283,48.9531 283,51.9531 C283,48.9531 285,46.9531 288,46.9531 C291,46.9531 293,48.9531 293,51.9531 C293,48.9531 295,46.9531 298,46.9531 C301,46.9531 303,48.9531 303,51.9531 C303,48.9531 305,46.9531 308,46.9531 C311,46.9531 313,48.9531 313,51.9531 C313,48.9531 315,46.9531 318,46.9531 C321,46.9531 323,48.9531 323,51.9531 C323,48.9531 325,46.9531 328,46.9531 C331,46.9531 333,48.9531 333,51.9531 C333,48.9531 335,46.9531 338,46.9531 C341,46.9531 343,48.9531 343,51.9531 C343,48.9531 345,46.9531 348,46.9531 C351,46.9531 353,48.9531 353,51.9531 C353,48.9531 355,46.9531 358,46.9531 C361,46.9531 363,48.9531 363,51.9531 C363,48.9531 365,46.9531 368,46.9531 C371,46.9531 373,48.9531 373,51.9531 C373,48.9531 375,46.9531 378,46.9531 C381,46.9531 383,48.9531 383,51.9531 C386,51.9531 388,53.9531 388,56.9531 C388,59.9531 386,61.9531 383,61.9531 C386,61.9531 388,63.9531 388,66.9531 C388,69.9531 386,71.9531 383,71.9531 C386,71.9531 388,73.9531 388,76.9531 C388,79.9531 386,81.9531 383,81.9531 C386,81.9531 388,83.9531 388,86.9531 C388,89.9531 386,91.9531 383,91.9531 C386,91.9531 388,93.9531 388,96.9531 C388,99.9531 386,101.9531 383,101.9531 C386,101.9531 388,103.9531 388,106.9531 C388,109.9531 386,111.9531 383,111.9531 C386,111.9531 388,113.9531 388,116.9531 C388,119.9531 386,121.9531 383,121.9531 C386,121.9531 388,123.9531 388,126.9531 C388,129.9531 386,131.9531 383,131.9531 C386,131.9531 388,133.9531 388,136.9531 C388,139.9531 386,141.9531 383,141.9531 C386,141.9531 388,143.9531 388,146.9531 C388,149.9531 386,151.9531 383,151.9531 C386,151.9531 388,153.9531 388,156.9531 C388,159.9531 386,161.9531 383,161.9531 C383,164.9531 380,166.9531 378,166.9531 C375,166.9531 373,164.9531 373,161.9531 C373,164.9531 370,166.9531 368,166.9531 C365,166.9531 363,164.9531 363,161.9531 C363,164.9531 360,166.9531 358,166.9531 C355,166.9531 353,164.9531 353,161.9531 C353,164.9531 350,166.9531 348,166.9531 C345,166.9531 343,164.9531 343,161.9531 C343,164.9531 340,166.9531 338,166.9531 C335,166.9531 333,164.9531 333,161.9531 C333,164.9531 330,166.9531 328,166.9531 C325,166.9531 323,164.9531 323,161.9531 C323,164.9531 320,166.9531 318,166.9531 C315,166.9531 313,164.9531 313,161.9531 C313,164.9531 310,166.9531 308,166.9531 C305,166.9531 303,164.9531 303,161.9531 C303,164.9531 300,166.9531 298,166.9531 C295,166.9531 293,164.9531 293,161.9531 C293,164.9531 290,166.9531 288,166.9531 C285,166.9531 283,164.9531 283,161.9531 C283,164.9531 280,166.9531 278,166.9531 C275,166.9531 273,164.9531 273,161.9531 C273,164.9531 270,166.9531 268,166.9531 C265,166.9531 263,164.9531 263,161.9531 C263,164.9531 260,166.9531 258,166.9531 C255,166.9531 253,164.9531 253,161.9531 C253,164.9531 250,166.9531 248,166.9531 C245,166.9531 243,164.9531 243,161.9531 C243,164.9531 240,166.9531 238,166.9531 C235,166.9531 233,164.9531 233,161.9531 C233,164.9531 230,166.9531 228,166.9531 C225,166.9531 223,164.9531 223,161.9531 C220,161.9531 218,159.9531 218,156.9531 C218,153.9531 220,151.9531 223,151.9531 C220,151.9531 218,149.9531 218,146.9531 C218,143.9531 220,141.9531 223,141.9531 C220,141.9531 218,139.9531 218,136.9531 C218,133.9531 220,131.9531 223,131.9531 C220,131.9531 218,129.9531 218,126.9531 C218,123.9531 220,121.9531 223,121.9531 C220,121.9531 218,119.9531 218,116.9531 C218,113.9531 220,111.9531 223,111.9531 C220,111.9531 218,109.9531 218,106.9531 C218,103.9531 220,101.9531 223,101.9531 C220,101.9531 218,99.9531 218,96.9531 C218,93.9531 220,91.9531 223,91.9531 C220,91.9531 218,89.9531 218,86.9531 C218,83.9531 220,81.9531 223,81.9531 C220,81.9531 218,79.9531 218,76.9531 C218,73.9531 220,71.9531 223,71.9531 C220,71.9531 218,69.9531 218,66.9531 C218,63.9531 220,61.9531 223,61.9531 C220,61.9531 218,59.9531 218,56.9531 C218,53.9531 220,51.9531 223,51.9531 " fill="#FFFFFF" filter="url(#f18thyhabak4vn)" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="240" y="70.9482">IoT Hub Service</text><!--cluster Identity Service--><polygon fill="#FF00FF" filter="url(#f18thyhabak4vn)" points="380,803.9531,390,793.9531,579,793.9531,579,948.9531,569,958.9531,380,958.9531,380,803.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="569" x2="578" y1="803.9531" y2="794.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="380" x2="569" y1="803.9531" y2="803.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="569" x2="569" y1="803.9531" y2="958.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="452" y="819.9482">«new»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="123" x="414" y="836.2451">Identity Service</text><!--cluster TPM Service--><polygon fill="#FF00FF" filter="url(#f18thyhabak4vn)" points="363,1017.9531,373,1007.9531,536,1007.9531,536,1162.9531,526,1172.9531,363,1172.9531,363,1017.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="526" x2="535" y1="1017.9531" y2="1008.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="363" x2="526" y1="1017.9531" y2="1017.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="526" x2="526" y1="1017.9531" y2="1172.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="422" y="1033.9482">«new»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="397" y="1050.2451">TPM Service</text><!--cluster Key Service--><polygon fill="#FF00FF" filter="url(#f18thyhabak4vn)" points="560,1017.9531,570,1007.9531,730,1007.9531,730,1162.9531,720,1172.9531,560,1172.9531,560,1017.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="720" x2="729" y1="1017.9531" y2="1008.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="560" x2="720" y1="1017.9531" y2="1017.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="720" x2="720" y1="1017.9531" y2="1172.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="617.5" y="1033.9482">«new»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="594" y="1050.2451">Key Service</text><!--cluster Certificate Service--><polygon fill="#FF00FF" filter="url(#f18thyhabak4vn)" points="754,1017.9531,764,1007.9531,976,1007.9531,976,1162.9531,966,1172.9531,754,1172.9531,754,1017.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="966" x2="975" y1="1017.9531" y2="1008.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="754" x2="966" y1="1017.9531" y2="1017.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="966" x2="966" y1="1017.9531" y2="1172.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="837.5" y="1033.9482">«new»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="146" x="788" y="1050.2451">Certificate Service</text><!--cluster Edge Module Runtime--><polygon fill="#FFFF00" filter="url(#f18thyhabak4vn)" points="612,391.9531,622,381.9531,858,381.9531,858,734.9531,848,744.9531,612,744.9531,612,391.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="848" x2="857" y1="391.9531" y2="382.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="612" x2="848" y1="391.9531" y2="391.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="848" x2="848" y1="391.9531" y2="744.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="692.5" y="407.9482">«modified»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="646" y="424.2451">Edge Module Runtime</text><!--cluster MR Legacy Service--><polygon fill="#FFFF00" filter="url(#f18thyhabak4vn)" points="636,466.9531,790,466.9531,797,489.25,800,489.25,800,572.9531,636,572.9531,636,466.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="636" x2="797" y1="489.25" y2="489.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="640" y="481.9482">MR Legacy Service</text><!--cluster Edge Agent--><polygon fill="#FFFFFF" filter="url(#f18thyhabak4vn)" points="632,226.9531,642,216.9531,906,216.9531,906,322.9531,896,332.9531,632,332.9531,632,226.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="896" x2="905" y1="226.9531" y2="217.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="632" x2="896" y1="226.9531" y2="226.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="896" x2="896" y1="226.9531" y2="332.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="719.5" y="242.9482">Edge Agent</text><!--cluster Host-level module--><polygon fill="#FFFFFF" filter="url(#f18thyhabak4vn)" points="22,1049.9531,32,1039.9531,339,1039.9531,339,1162.9531,329,1172.9531,22,1172.9531,22,1049.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="329" x2="338" y1="1049.9531" y2="1040.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="329" y1="1049.9531" y2="1049.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="329" x2="329" y1="1049.9531" y2="1172.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="105.5" y="1065.9482">Host-level module</text><!--cluster Edge Hub--><polygon fill="#FFFFFF" filter="url(#f18thyhabak4vn)" points="294,226.9531,304,216.9531,605,216.9531,605,322.9531,595,332.9531,294,332.9531,294,226.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="595" x2="604" y1="226.9531" y2="217.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="294" x2="595" y1="226.9531" y2="226.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="595" x2="595" y1="226.9531" y2="332.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="408" y="242.9482">Edge Hub</text><!--entity DPS Gateway--><rect fill="#FFFFFF" filter="url(#f18thyhabak4vn)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="460" y="675.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="455" y="680.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="455" y="718.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="67" x="482.5" y="698.9482">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="470" y="715.2451">DPS Gateway</text><!--entity PKI Service--><rect fill="#FFFFFF" filter="url(#f18thyhabak4vn)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="308.5" y="675.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="303.5" y="680.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="303.5" y="718.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="67" x="322.5" y="698.9482">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="318.5" y="715.2451">PKI Service</text><!--entity IoTHub Gateway--><rect fill="#FFFFFF" filter="url(#f18thyhabak4vn)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="236" y="98.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="231" y="103.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="231" y="141.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="67" x="268.5" y="121.9482">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="246" y="138.2451">IoTHub Gateway</text><!--entity IS API Server--><rect fill="#00FFFF" filter="url(#f18thyhabak4vn)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="434.5" y="889.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="429.5" y="894.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="429.5" y="932.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="445" y="912.9482">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="444.5" y="929.2451">IS API Server</text><!--entity TPMS API Server--><rect fill="#00FFFF" filter="url(#f18thyhabak4vn)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="388" y="1103.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="383" y="1108.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="383" y="1146.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="412" y="1126.9482">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="398" y="1143.2451">TPMS API Server</text><!--entity KS API Server--><rect fill="#00FFFF" filter="url(#f18thyhabak4vn)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="575.5" y="1103.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="570.5" y="1108.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="570.5" y="1146.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="589" y="1126.9482">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="585.5" y="1143.2451">KS API Server</text><!--entity CS API Server--><rect fill="#00FFFF" filter="url(#f18thyhabak4vn)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="770" y="1103.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="765" y="1108.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="765" y="1146.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="784" y="1126.9482">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="780" y="1143.2451">CS API Server</text><!--entity MR Client--><rect fill="#00FFFF" filter="url(#f18thyhabak4vn)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="636" y="675.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="631" y="680.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="631" y="718.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="646" y="698.9482">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="655.5" y="715.2451">MR Client</text><!--entity MR API Server--><rect fill="#FFFFFF" filter="url(#f18thyhabak4vn)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="652.5" y="520.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="647.5" y="525.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="647.5" y="547.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="662.5" y="543.9482">MR API Server</text><!--entity EA Runtime--><rect fill="#FFFFFF" filter="url(#f18thyhabak4vn)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="790" y="280.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="785" y="285.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="785" y="307.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="800" y="303.9482">EA Runtime</text><!--entity MR EA Client--><rect fill="#FFFFFF" filter="url(#f18thyhabak4vn)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="647.5" y="280.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="642.5" y="285.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="642.5" y="307.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="657.5" y="303.9482">MR EA Client</text><!--entity HLM Client--><rect fill="#00FFFF" filter="url(#f18thyhabak4vn)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="219" y="1103.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="214" y="1108.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="214" y="1146.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="229" y="1126.9482">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="235" y="1143.2451">HLM Client</text><!--entity IoTHub HLM Client--><rect fill="#FFFFFF" filter="url(#f18thyhabak4vn)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="38.5" y="1112.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="33.5" y="1117.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="33.5" y="1138.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="48.5" y="1135.4482">IoTHub HLM Client</text><!--entity MR EH Client--><rect fill="#FFFFFF" filter="url(#f18thyhabak4vn)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="481" y="280.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="476" y="285.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="476" y="307.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="491" y="303.9482">MR EH Client</text><!--entity IoTHub EH Client--><rect fill="#FFFFFF" filter="url(#f18thyhabak4vn)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="310.5" y="280.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="305.5" y="285.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="305.5" y="307.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="320.5" y="303.9482">IoTHub EH Client</text><!--entity HSM--><path d="M525.5,1245.9531 C525.5,1235.9531 551,1235.9531 551,1235.9531 C551,1235.9531 576.5,1235.9531 576.5,1245.9531 L576.5,1271.25 C576.5,1281.25 551,1281.25 551,1281.25 C551,1281.25 525.5,1281.25 525.5,1271.25 L525.5,1245.9531 " fill="#FEFECE" filter="url(#f18thyhabak4vn)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M525.5,1245.9531 C525.5,1255.9531 551,1255.9531 551,1255.9531 C551,1255.9531 576.5,1255.9531 576.5,1245.9531 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="535.5" y="1272.9482">HSM</text><!--link MR Client to IS API Server--><path d="M640.7,728.9931 C626.15,738.0331 610.66,748.9731 598,760.9531 C558.18,798.6631 523.32,852.4531 503.73,885.5931 " fill="none" id="MR Client-IS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="501.19,889.9331,509.1918,884.191,503.7182,885.6194,502.2899,880.1459,501.19,889.9331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="599" y="774.02">IPC</text><!--link MR Client to CS API Server--><path d="M696.32,729.1431 C720.38,803.4231 789.98,1018.2731 816.02,1098.6331 " fill="none" id="MR Client-CS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="817.67,1103.7331,818.6983,1093.9381,816.1275,1098.977,811.0886,1096.4061,817.67,1103.7331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="773" y="921.02">IPC</text><!--link MR Client to KS API Server--><path d="M684.56,729.1431 C674.62,803.4231 645.88,1018.2731 635.12,1098.6331 " fill="none" id="MR Client-KS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="634.44,1103.7331,639.588,1095.3368,635.0971,1098.7765,631.6574,1094.2855,634.44,1103.7331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="677" y="921.02">IPC</text><!--link IS API Server to HLM Client--><path d="M441.07,945.9731 C419.03,960.7231 392.93,979.8431 372,999.9531 C338.28,1032.3431 306.31,1076.3831 287.69,1103.8531 " fill="none" id="IS API Server-HLM Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="445.42,943.0731,435.7101,944.7219,441.2554,945.84,440.1372,951.3853,445.42,943.0731" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="399" y="988.02">IPC</text><!--link KS API Server to HLM Client--><path d="M616.28,1099.3431 C600.79,1070.6731 573.46,1029.9331 536,1011.9531 C470.29,980.4131 438.18,981.4031 372,1011.9531 C331.26,1030.7631 300.89,1075.0031 284.57,1103.7831 " fill="none" id="KS API Server-HLM Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="618.66,1103.8331,617.9871,1094.0073,616.3219,1099.4135,610.9157,1097.7483,618.66,1103.8331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="497" y="988.02">IPC</text><!--link MR EH Client to MR API Server--><path d="M547.59,317.0731 C578.85,359.5931 660.01,469.9631 694.32,516.6231 " fill="none" id="MR EH Client-MR API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="697.29,520.6731,695.1668,511.0559,694.3221,516.6493,688.7286,515.8046,697.29,520.6731" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="582" y="362.02">IPC</text><!--link MR EA Client to MR API Server--><path d="M701.65,317.0731 C703.24,359.2531 707.36,468.1931 709.15,515.4831 " fill="none" id="MR EA Client-MR API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="709.35,520.6731,713.0132,511.5309,709.1644,515.6766,705.0187,511.8278,709.35,520.6731" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="704" y="362.02">IPC</text><!--link MR API Server to MR Client--><path d="M707.65,557.2331 C703.96,584.2731 696.79,636.9431 692.2,670.6031 " fill="none" id="MR API Server-MR Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="691.49,675.8331,696.6618,667.4514,692.1611,670.8784,688.7342,666.3777,691.49,675.8331" style="stroke: #A80036; stroke-width: 1.0;"/><!--link IS API Server to KS API Server--><path d="M504.37,943.0231 C531.13,982.4231 582.31,1057.7631 610.72,1099.6031 " fill="none" id="IS API Server-KS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="613.57,1103.7931,611.8444,1094.0966,610.7702,1099.6505,605.2163,1098.5763,613.57,1103.7931" style="stroke: #A80036; stroke-width: 1.0;"/><!--link IS API Server to CS API Server--><path d="M539.76,941.0431 C559.46,949.5631 582.12,959.0331 603,966.9531 C646.37,983.4031 662.81,975.1431 702,999.9531 C743.99,1026.5331 781.83,1070.3231 804.37,1099.5231 " fill="none" id="IS API Server-CS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="807.58,1103.7231,805.3032,1094.1411,804.5481,1099.7473,798.9418,1098.9922,807.58,1103.7231" style="stroke: #A80036; stroke-width: 1.0;"/><!--link IS API Server to TPMS API Server--><path d="M483.02,943.0231 C476.92,982.1831 465.3,1056.8531 458.77,1098.8331 " fill="none" id="IS API Server-TPMS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="457.99,1103.7931,463.33,1095.5176,458.761,1098.8529,455.4257,1094.284,457.99,1103.7931" style="stroke: #A80036; stroke-width: 1.0;"/><!--link TPMS API Server to HSM--><path d="M473.48,1157.0031 C484.47,1171.4031 498.47,1189.7031 511,1205.9531 C517.53,1214.4331 524.7,1223.6631 531.13,1231.9531 " fill="none" id="TPMS API Server-HSM" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="534.23,1235.9331,531.8764,1226.3696,531.1662,1231.9817,525.5541,1231.2716,534.23,1235.9331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="512" y="1202.02">aziot-tpm</text><!--link KS API Server to HSM--><path d="M614.62,1157.2531 C600.88,1178.9031 581.34,1209.6731 567.55,1231.3831 " fill="none" id="KS API Server-HSM" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="564.7,1235.8731,572.9018,1230.4205,567.3807,1231.6525,566.1487,1226.1314,564.7,1235.8731" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="594" y="1202.02">libaziot-keys</text><!--link IoTHub Gateway to IS API Server--><path d="M288.38,156.8131 C274.5,190.5731 255,247.0431 255,297.9531 C255,297.9531 255,297.9531 255,703.4531 C255,800.0231 365.91,864.4031 434.36,894.9331 " fill="none" id="IoTHub Gateway-IS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="290.38,152.0031,283.2262,158.7724,288.4569,156.6185,290.6108,161.8493,290.38,152.0031" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="256" y="543.52">HTTPS</text><!--link DPS Gateway to IS API Server--><path d="M511.79,734.2231 C506.05,776.2031 495.86,850.6631 490.51,889.7931 " fill="none" id="DPS Gateway-IS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="512.5,729.0231,507.3282,737.4048,511.8289,733.9779,515.2558,738.4786,512.5,729.0231" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="508" y="774.02">HTTPS</text><!--link PKI Service to IS API Server--><path d="M374.54,733.4631 C400.39,775.2931 446.81,850.4231 471.14,889.7931 " fill="none" id="PKI Service-IS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="371.8,729.0231,373.1248,738.7825,374.4269,733.2775,379.9318,734.5795,371.8,729.0231" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="399" y="774.02">HTTPS</text><!--link IoTHub Gateway to IoTHub EH Client--><path d="M315.46,156.8331 C330.58,190.9531 354.76,245.5131 368.19,275.8231 " fill="none" id="IoTHub Gateway-IoTHub EH Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="370.25,280.4731,370.2557,270.6243,368.222,275.9029,362.9433,273.8691,370.25,280.4731" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="313.38,152.1331,313.3743,161.982,315.408,156.7034,320.6867,158.7371,313.38,152.1331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="334" y="197.02">AMQP (EH Module)</text><!--link IoTHub Gateway to IoTHub HLM Client--><path d="M234.07,154.3131 C179.18,181.8531 111,229.7931 111,297.9531 C111,297.9531 111,297.9531 111,917.4531 C111,986.5631 111,1068.3431 111,1107.0231 " fill="none" id="IoTHub Gateway-IoTHub HLM Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="111,1112.4131,115,1103.4131,111,1107.4131,107,1103.4131,111,1112.4131" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="238.67,152.0431,228.8297,152.4525,234.1893,154.262,232.3799,159.6217,238.67,152.0431" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="112" y="602.02">AMQP (HL Module)</text><!--link IoTHub Gateway to EA Runtime--><path d="M373.46,132.6131 C487.92,143.5231 706.16,168.9431 772,208.9531 C800.42,226.2231 821.21,260.1331 831.89,280.7431 " fill="none" id="IoTHub Gateway-EA Runtime" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="368.43,132.1331,377.0135,136.9626,373.4078,132.6038,377.7666,128.9981,368.43,132.1331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="753" y="197.02">HTTPS</text><!--
@startuml
title Data Flow - new architecture

cloud "DPS Service" {
    [DPS Gateway] <<service>>
}

cloud "PKI" {
    [PKI Service] <<service>>
}

cloud "IoT Hub Service" {
    [IoTHub Gateway] <<service>>
}

node "Identity Service" <<new>> {
    [IS API Server] <<newclient>>
}

node "TPM Service" <<new>> {
    [TPMS API Server] <<newclient>>
}

node "Key Service" <<new>> {
    [KS API Server] <<newclient>>
    [KS API Server] <<newclient>>
}

node "Certificate Service" <<new>> {
    [CS API Server] <<newclient>>
}

node "Edge Module Runtime" <<modified>> {
    folder "MR Legacy Service" {
        [MR API Server]
    }
    [MR Client] <<newclient>>
}
node "Edge Agent" {
    [EA Runtime]
    [MR EA Client]
}
node "Host-level module" {
    [HLM Client] <<newclient>>
    [IoTHub HLM Client]
}
node "Edge Hub" {
    [MR EH Client]
    [IoTHub EH Client]
}

database "HSM"

[MR Client] -down-> [IS API Server] : IPC
[MR Client] -down-> [CS API Server] : IPC
[MR Client] -down-> [KS API Server] : IPC
[HLM Client] -left-> [IS API Server] : IPC
[HLM Client] -left-> [KS API Server] : IPC
[MR EH Client] - -> [MR API Server] : IPC
[MR EA Client] - -> [MR API Server] : IPC

[MR API Server] - -> [MR Client]
[IS API Server] -down-> [KS API Server]
[IS API Server] -down-> [CS API Server]
[IS API Server] -down-> [TPMS API Server]
[TPMS API Server] -down-> HSM : aziot-tpm
[KS API Server] -down-> HSM : libaziot-keys

[IS API Server] -up-> [IoTHub Gateway] : HTTPS
[IS API Server] -up-> [DPS Gateway] : HTTPS
[IS API Server] -up-> [PKI Service] : HTTPS

[IoTHub EH Client] <-up-> [IoTHub Gateway] : AMQP (EH Module)
[IoTHub HLM Client] <-up-> [IoTHub Gateway] : AMQP (HL Module)

[EA Runtime] -up-> [IoTHub Gateway] : HTTPS

skinparam node {
    backgroundColor<<new>> Magenta
    backgroundColor<<modified>> Yellow
}

skinparam component {
    backgroundColor White
    backgroundColor<<newclient>> Cyan
    backgroundColor<<modified>> Yellow
    backgroundColor<<service>> White
}

@enduml

PlantUML version 1.2018.13(Mon Nov 26 12:11:51 EST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.8+10-post-Ubuntu-0ubuntu120.04
Operating System: Linux
OS Version: 5.4.0-7642-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>