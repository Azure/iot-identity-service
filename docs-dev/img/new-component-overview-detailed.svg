<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1213px" preserveAspectRatio="none" style="width:1706px;height:1213px;background:#FFFFFF;" version="1.1" viewBox="0 0 1706 1213" width="1706px" zoomAndPan="magnify"><defs><filter height="300%" id="f1q5y9dx24psoc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="271" x="711" y="16.708">Data Flow - new architecture</text><!--MD5=[4034dc877b8eccbaf2b7bb77a2a7acd3]
cluster DPS Service--><path d="M1375.486,526.0115 C1377.9693,520.0248 1383.4278,521.0082 1386.4249,525.4738 C1389.2485,519.6992 1393.4355,517.4336 1398.4119,523.2467 C1401.1092,517.8884 1405.709,515.7759 1410.1002,521.4525 C1413.4852,516.7595 1417.7125,515.4347 1421.4715,521.0395 C1423.6478,515.4825 1427.4144,513.8544 1432.0829,518.4296 C1434.3912,512.6955 1439.2139,511.3293 1443.665,516.0573 C1447.5622,510.5274 1452.7528,512.4309 1454.7842,517.9372 C1460.1215,511.581 1463.9555,513.2403 1467.6924,519.5661 C1472.1715,514.7145 1475.5002,515.65 1478.3066,521.2627 C1483.2464,517.1993 1487.011,517.4774 1489.3944,523.9524 C1493.3436,517.9742 1497.3273,519.2174 1500.7723,524.4635 C1509.3236,518.9254 1517.4627,521.6253 1519,532.3331 C1519.7063,531.4716 1520.8019,531.5195 1521.1583,532.7025 C1527.28,536.1982 1528.3757,541.8443 1521.7088,545.8745 C1527.6483,549.5928 1527.2675,554.3419 1522.0118,558.3325 C1528.2708,560.9992 1530.1835,567.0362 1523.5357,571.2281 C1530.4109,574.5797 1531.8271,581.3483 1524.9218,585.9936 C1530.178,590.0295 1529.4881,594.2892 1524.339,597.812 C1530.5917,602.1286 1528.7366,606.7695 1523.1912,609.9726 C1528.421,615.3152 1528.5794,619.6589 1520.8967,622.6677 C1527.8527,632.932 1522.6999,640.0564 1512,642.3331 C1513.3698,642.4794 1513.8044,643.2637 1513.2194,644.5066 C1508.7577,649.5847 1505.493,648.6492 1502.1534,643.3141 C1498.3621,649.9076 1492.7103,649.123 1489.0893,643.1372 C1486.3945,647.9859 1482.7806,647.6542 1479.6062,643.651 C1476.9263,650.1685 1470.9017,651.0974 1466.3612,645.7234 C1462.8238,650.6804 1458.8489,649.2502 1456.1836,644.7816 C1452.0675,650.0158 1448.6369,649.9701 1445.0698,644.2258 C1442.0993,650.1696 1436.6283,650.8586 1432.1686,646.0053 C1427.2598,650.7627 1424.1382,649.879 1421.7333,643.6311 C1418.5894,650.2781 1413.7183,649.2625 1409.9434,644.2701 C1407.0771,650.252 1401.7929,650.8767 1398.1628,645.0308 C1394.0042,650.4778 1388.9973,650.2063 1386.009,643.8282 C1376.5322,651.6305 1368.1204,646.2295 1367,635.3331 C1367.837,635.6989 1367.9162,636.3391 1367.3423,636.9953 C1360.2801,632.6559 1361.8663,626.7272 1367.9031,622.9093 C1362.0929,619.8401 1361.8502,615.2536 1366.5961,611.0236 C1360.3574,607.6424 1358.9115,600.9294 1366.3447,597.2978 C1359.8674,594.7656 1359.8737,589.2193 1365.5615,585.8544 C1358.4841,581.7569 1360.1218,575.8717 1365.9494,572.1392 C1359.9655,567.4759 1360.5109,563.3694 1366.4599,559.1761 C1360.3267,554.8499 1359.953,548.1184 1367.8818,545.2256 C1360.2861,536.8301 1363.9374,528.2976 1374,525.3331 C1374.7265,524.8719 1375.4155,525.0357 1375.486,526.0115 " fill="#FFFFFF" filter="url(#f1q5y9dx24psoc)" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="94" x="1396" y="543.3282">DPS Service</text><!--MD5=[9cc3614b0e94473f1fa5351936eadb26]
cluster PKI--><path d="M364.854,85.7859 C367.9417,80.0303 373.9862,78.0191 378.2612,84.4833 C380.9123,78.9067 385.0902,78.7854 389.298,82.6668 C390.8987,75.9126 396.4255,75.138 400.617,80.181 C403.5927,73.1251 410.1643,73.253 414.1248,79.1544 C417.0501,71.9406 421.5837,70.9983 426.6783,77.1109 C430.3254,71.8719 434.2674,72.3985 437.2753,77.7504 C441.3088,71.7511 447.2094,72.7804 449.4571,79.4654 C455.377,73.9458 459.3877,76.0804 462.2048,82.7187 C466.2005,77.8334 471.6291,78.1642 474.2,84.2731 C483.5481,76.6182 490.9897,81.2409 493,91.8331 C494.5123,91.2936 495.171,92.0981 495.1721,93.5128 C501.4032,97.3973 500.2629,102.6716 494.2093,105.5757 C501.0423,109.5573 500.4084,113.7285 495.2509,118.6643 C501.1647,121.6097 502.84,126.4245 496.9741,131.0136 C502.4156,135.1621 502.7058,140.1529 497.1649,144.4572 C502.9887,148.0847 503.174,153.3401 497.3141,157.1055 C502.9398,161.4484 502.4176,167.3901 495.7796,170.3077 C501.9148,174.8124 503.1918,179.3144 495.7971,183.8366 C501.4598,194.4854 496.7665,200.1282 486,201.8331 C487.3017,201.229 487.947,201.7087 487.9997,203.0907 C484.5163,209.9067 480.3859,209.2711 475.9424,204.0526 C472.0336,210.5373 468.083,212.374 462.2682,206.0944 C458.3919,211.1664 453.6158,210.8497 450.6376,205.1269 C448.498,212.3281 442.1719,212.212 438.0877,207.1105 C435.7189,213.1536 430.9803,214.0074 426.8968,208.819 C421.6355,215.4332 415.9018,213.2323 412.9063,206.4524 C409.2678,211.6847 404.4666,211.6667 401.9836,205.3588 C397.7983,211.1006 392.9099,212.2595 388.9805,205.1009 C386.2448,210.4942 380.951,210.5223 378.3157,205.0027 C366.4823,211.6841 359.0138,208.734 357,194.8331 C358.4869,195.0429 358.916,195.6619 358.0989,197.0262 C349.1023,194.9903 347.9026,187.5127 354.9352,182.0832 C348.4998,179.403 347.4036,175.1261 352.9437,170.4038 C347.0726,166.8176 346.4361,163.0839 351.6273,158.2951 C345.687,155.0646 343.5588,150.5257 349.3644,145.2566 C344.2241,140.6865 343.5759,135.618 350.4635,132.0487 C344.2399,126.6506 345.5541,122.0079 352.7697,118.9817 C347.6716,114.3032 348.504,108.3191 355.0995,105.6904 C347.6646,94.6249 351.4078,87.3523 364,84.8331 C364.7443,84.6598 365.1213,85.0527 364.854,85.7859 " fill="#FFFFFF" filter="url(#f1q5y9dx24psoc)" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="25" x="412.5" y="102.8282">PKI</text><!--MD5=[4b6597e5202bb255e27abc7ed2ac90aa]
cluster IoT Hub Service--><path d="M795.1556,87.0981 C797.1603,81.0756 802.0671,78.6996 807.3993,83.2418 C811.9604,77.0938 816.9115,76.6349 821.8197,82.8364 C825.2657,77.3514 830.2278,76.2885 834.4132,82.005 C837.2944,73.6789 841.6083,73.644 847.7293,78.8068 C850.897,72.2955 856.4024,71.5887 861.3214,76.7713 C864.5416,70.5694 870.4979,71.1292 874.013,76.4464 C878.3041,71.0238 882.2395,71.4929 886.2695,76.7463 C891.8913,71.2742 897.1177,72.3565 900.3027,79.4645 C905.2055,74.0627 910.6905,74.9049 913.1252,81.9974 C917.1159,76.1963 923.455,76.3583 927.3469,82.119 C932.0104,77.5579 936.818,77.3545 939.3101,84.3641 C948.4056,78.1755 956.9733,79.3872 959,91.8331 C960.2897,91.5396 960.8633,92.3495 960.51,93.5236 C966.431,97.1449 968.0917,101.6824 961.4235,106.2101 C967.5942,109.5038 967.0911,113.8263 962.3118,117.9487 C967.748,121.3863 969.3285,126.4948 963.001,130.5745 C969.0299,134.1632 969.7718,141.3539 963.4633,145.3293 C968.6004,149.023 968.2568,153.4883 962.7956,156.5514 C968.5205,160.9167 968.7513,167.2161 962.0912,170.9767 C967.1237,175.8476 965.7691,179.1797 960.3199,182.4295 C966.6367,191.6341 962.902,200.0116 952,201.8331 C952.6638,201.948 952.977,202.301 952.5638,202.9565 C949.2166,209.0899 943.0289,208.9309 939.7434,202.8915 C937.1052,209.1547 931.8325,209.434 927.9465,204.1684 C924.4287,212.3115 919.7261,212.1299 914.0227,206.3549 C910.0788,212.307 904.3432,212.8138 900.5966,206.145 C896.1562,212.4471 891.5137,212.6895 886.3359,207.0236 C884.3094,212.8534 878.7236,214.9127 874.1531,209.8755 C869.0466,215.4049 864.915,215.0916 862.0464,207.7676 C857.4868,214.8336 851.1407,212.6461 847.8139,206.4452 C843.0294,212.2712 837.9199,213.8783 833.5319,206.0311 C829.5918,211.5619 825.8619,211.879 822.0853,205.869 C816.5415,211.9486 811.8806,212.1931 807.5909,204.5448 C797.6419,212.1059 787.9209,206.4134 787,194.8331 C787.5794,194.9586 787.6003,195.322 787.3313,195.753 C781.1957,192.8456 779.8074,186.9688 786.0968,182.8707 C778.9685,180.6366 777.9716,174.8075 784.1422,170.4763 C778.449,167.7858 776.234,162.8279 782.0824,158.2009 C775.6327,155.383 772.5602,150.2654 778.9476,144.5085 C772.889,139.372 774.0097,134.1055 781.3273,131.3967 C775.5103,125.8403 776.807,121.4324 783.6405,118.0721 C777.6657,112.1782 779.3122,108.4372 786.3551,105.313 C780.6108,95.0869 780.6982,87.9495 794,84.8331 C795.4753,84.8164 795.8736,85.9957 795.1556,87.0981 " fill="#FFFFFF" filter="url(#f1q5y9dx24psoc)" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="125" x="810.5" y="102.8282">IoT Hub Service</text><!--MD5=[7794c020febe37fee2610325f7805d30]
cluster Identity Service--><polygon fill="#FF00FF" filter="url(#f1q5y9dx24psoc)" points="992,709.3331,1002,699.3331,1195,699.3331,1195,864.3331,1185,874.3331,992,874.3331,992,709.3331" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1185" x2="1195" y1="709.3331" y2="699.3331"/><line style="stroke:#000000;stroke-width:1.5;" x1="992" x2="1185" y1="709.3331" y2="709.3331"/><line style="stroke:#000000;stroke-width:1.5;" x1="1185" x2="1185" y1="709.3331" y2="874.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="47" x="1066" y="725.3282">«new»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="127" x="1026" y="741.6251">Identity Service</text><!--MD5=[d88e5f0d36969e2aab7040446f6f198b]
cluster TPM Service--><polygon fill="#FF00FF" filter="url(#f1q5y9dx24psoc)" points="1148,933.3331,1158,923.3331,1338,923.3331,1338,1088.3331,1328,1098.3331,1148,1098.3331,1148,933.3331" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1328" x2="1338" y1="933.3331" y2="923.3331"/><line style="stroke:#000000;stroke-width:1.5;" x1="1148" x2="1328" y1="933.3331" y2="933.3331"/><line style="stroke:#000000;stroke-width:1.5;" x1="1328" x2="1328" y1="933.3331" y2="1098.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="47" x="1215.5" y="949.3282">«new»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="98" x="1190" y="965.6251">TPM Service</text><!--MD5=[9e5069793647d3bf2dd98c06c7283a6f]
cluster Key Service--><polygon fill="#FF00FF" filter="url(#f1q5y9dx24psoc)" points="854,933.3331,864,923.3331,1024,923.3331,1024,1088.3331,1014,1098.3331,854,1098.3331,854,933.3331" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1014" x2="1024" y1="933.3331" y2="923.3331"/><line style="stroke:#000000;stroke-width:1.5;" x1="854" x2="1014" y1="933.3331" y2="933.3331"/><line style="stroke:#000000;stroke-width:1.5;" x1="1014" x2="1014" y1="933.3331" y2="1098.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="47" x="911.5" y="949.3282">«new»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91" x="889.5" y="965.6251">Key Service</text><!--MD5=[4e0ace6db1f04dc49a616f890a95ce58]
cluster Certificate Service--><polygon fill="#FF00FF" filter="url(#f1q5y9dx24psoc)" points="358,933.3331,368,923.3331,584,923.3331,584,1088.3331,574,1098.3331,358,1098.3331,358,933.3331" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="574" x2="584" y1="933.3331" y2="923.3331"/><line style="stroke:#000000;stroke-width:1.5;" x1="358" x2="574" y1="933.3331" y2="933.3331"/><line style="stroke:#000000;stroke-width:1.5;" x1="574" x2="574" y1="933.3331" y2="1098.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="47" x="443.5" y="949.3282">«new»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="150" x="392" y="965.6251">Certificate Service</text><!--MD5=[8ff2ff8eaa8b0e22a01544f4bdf4d05f]
cluster Edge Module Runtime--><polygon fill="#FFFF00" filter="url(#f1q5y9dx24psoc)" points="103,450.8331,113,440.8331,595,440.8331,595,864.3331,585,874.3331,103,874.3331,103,450.8331" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="585" x2="595" y1="450.8331" y2="440.8331"/><line style="stroke:#000000;stroke-width:1.5;" x1="103" x2="585" y1="450.8331" y2="450.8331"/><line style="stroke:#000000;stroke-width:1.5;" x1="585" x2="585" y1="450.8331" y2="874.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="81" x="304.5" y="466.8282">«modified»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="174" x="258" y="483.1251">Edge Module Runtime</text><!--MD5=[7cbe1a5fc3e046c9a58895a21185779e]
cluster MR Legacy Service--><polygon fill="#FFFF00" filter="url(#f1q5y9dx24psoc)" points="304,525.8331,459,525.8331,466,548.13,476,548.13,476,641.8331,304,641.8331,304,525.8331" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="304" x2="466" y1="548.13" y2="548.13"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="149" x="308" y="540.8282">MR Legacy Service</text><!--MD5=[9b13154502175b34a7dde17b32f1f8a1]
cluster Edge Agent--><polygon fill="#FFFFFF" filter="url(#f1q5y9dx24psoc)" points="496,275.8331,506,265.8331,819,265.8331,819,381.8331,809,391.8331,496,391.8331,496,275.8331" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="809" x2="819" y1="275.8331" y2="265.8331"/><line style="stroke:#000000;stroke-width:1.5;" x1="496" x2="809" y1="275.8331" y2="275.8331"/><line style="stroke:#000000;stroke-width:1.5;" x1="809" x2="809" y1="275.8331" y2="391.8331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91" x="608" y="291.8282">Edge Agent</text><!--MD5=[7d68aa027216ad083fcdb57666e906fc]
cluster Host-level module--><polygon fill="#FFFFFF" filter="url(#f1q5y9dx24psoc)" points="666,517.3331,676,507.3331,1214,507.3331,1214,640.3331,1204,650.3331,666,650.3331,666,517.3331" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1204" x2="1214" y1="517.3331" y2="507.3331"/><line style="stroke:#000000;stroke-width:1.5;" x1="666" x2="1204" y1="517.3331" y2="517.3331"/><line style="stroke:#000000;stroke-width:1.5;" x1="1204" x2="1204" y1="517.3331" y2="650.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="145" x="863.5" y="533.3282">Host-level module</text><!--MD5=[b606e694e189a5e0bde06dd1b8d0f0e0]
cluster Edge Hub--><polygon fill="#FFFFFF" filter="url(#f1q5y9dx24psoc)" points="113,275.8331,123,265.8331,472,265.8331,472,381.8331,462,391.8331,113,391.8331,113,275.8331" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="462" x2="472" y1="275.8331" y2="265.8331"/><line style="stroke:#000000;stroke-width:1.5;" x1="113" x2="462" y1="275.8331" y2="275.8331"/><line style="stroke:#000000;stroke-width:1.5;" x1="462" x2="462" y1="275.8331" y2="391.8331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="74" x="251.5" y="291.8282">Edge Hub</text><!--MD5=[e8cfd881e0c7b95e10a1bb0d559cc9f2]
entity DPS Gateway--><rect fill="#FFFFFF" filter="url(#f1q5y9dx24psoc)" height="62.5938" style="stroke:#A80036;stroke-width:1.5;" width="135" x="1375.5" y="571.3331"/><rect fill="#FFFFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1490.5" y="576.3331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1488.5" y="578.3331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1488.5" y="582.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="69" x="1403.5" y="604.3282">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1390.5" y="620.6251">DPS Gateway</text><!--MD5=[344739cc555d75ba553dad245e8ebc3e]
entity PKI Service--><rect fill="#FFFFFF" filter="url(#f1q5y9dx24psoc)" height="62.5938" style="stroke:#A80036;stroke-width:1.5;" width="120" x="365" y="130.8331"/><rect fill="#FFFFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="465" y="135.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="463" y="137.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="463" y="141.8331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="69" x="385.5" y="163.8282">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="380" y="180.1251">PKI Service</text><!--MD5=[90fbbf7b6c870618297b0507f9a7a4e4]
entity IoTHub Gateway--><rect fill="#FFFFFF" filter="url(#f1q5y9dx24psoc)" height="62.5938" style="stroke:#A80036;stroke-width:1.5;" width="156" x="795" y="130.8331"/><rect fill="#FFFFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="931" y="135.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="929" y="137.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="929" y="141.8331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="69" x="833.5" y="163.8282">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="810" y="180.1251">IoTHub Gateway</text><!--MD5=[084e4c2da341887b8d9e91d65abc0526]
entity IS API Server--><rect fill="#00FFFF" filter="url(#f1q5y9dx24psoc)" height="62.5938" style="stroke:#A80036;stroke-width:1.5;" width="131" x="1020.5" y="795.3331"/><rect fill="#00FFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1131.5" y="800.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1129.5" y="802.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1129.5" y="806.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="1038" y="828.3282">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="1035.5" y="844.6251">IS API Server</text><!--MD5=[9c06828d24dcdfa7343e1322e34b06bd]
entity TPMS API Server--><rect fill="#00FFFF" filter="url(#f1q5y9dx24psoc)" height="62.5938" style="stroke:#A80036;stroke-width:1.5;" width="157" x="1164.5" y="1019.3331"/><rect fill="#00FFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1301.5" y="1024.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1299.5" y="1026.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1299.5" y="1030.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="1195" y="1052.3282">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1179.5" y="1068.6251">TPMS API Server</text><!--MD5=[4815293e3103fd40b22d8b2760126ba0]
entity KS API Server--><rect fill="#00FFFF" filter="url(#f1q5y9dx24psoc)" height="62.5938" style="stroke:#A80036;stroke-width:1.5;" width="137" x="870.5" y="1019.3331"/><rect fill="#00FFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="987.5" y="1024.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="985.5" y="1026.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="985.5" y="1030.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="891" y="1052.3282">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="885.5" y="1068.6251">KS API Server</text><!--MD5=[e46db663c6807955aebb9f838b3ae64c]
entity CS API Server--><rect fill="#00FFFF" filter="url(#f1q5y9dx24psoc)" height="62.5938" style="stroke:#A80036;stroke-width:1.5;" width="137" x="415.5" y="1019.3331"/><rect fill="#00FFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="532.5" y="1024.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="530.5" y="1026.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="530.5" y="1030.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="436" y="1052.3282">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="430.5" y="1068.6251">CS API Server</text><!--MD5=[3015580521d7a46dd6257113700ed852]
entity IS MR Client--><rect fill="#00FFFF" filter="url(#f1q5y9dx24psoc)" height="62.5938" style="stroke:#A80036;stroke-width:1.5;" width="126" x="119" y="795.3331"/><rect fill="#00FFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="225" y="800.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="223" y="802.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="223" y="806.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="134" y="828.3282">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="134" y="844.6251">IS MR Client</text><!--MD5=[ecef60f21877ac11267e02fd67475444]
entity CS MR Client--><rect fill="#00FFFF" filter="url(#f1q5y9dx24psoc)" height="62.5938" style="stroke:#A80036;stroke-width:1.5;" width="132" x="280" y="795.3331"/><rect fill="#00FFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="392" y="800.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="390" y="802.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="390" y="806.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="298" y="828.3282">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="295" y="844.6251">CS MR Client</text><!--MD5=[6415928faf73ed48dc9621681c894071]
entity KS MR Client--><rect fill="#00FFFF" filter="url(#f1q5y9dx24psoc)" height="62.5938" style="stroke:#A80036;stroke-width:1.5;" width="132" x="447" y="795.3331"/><rect fill="#00FFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="559" y="800.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="557" y="802.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="557" y="806.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="465" y="828.3282">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="462" y="844.6251">KS MR Client</text><!--MD5=[3155f9bf23155fc869faccdedd826a7d]
entity MR API Server--><rect fill="#FFFFFF" filter="url(#f1q5y9dx24psoc)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="140" x="320" y="579.8331"/><rect fill="#FFFFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="440" y="584.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="438" y="586.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="438" y="590.8331"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="335" y="612.8282">MR API Server</text><!--MD5=[5ba7c1ccec5022ed021ea15342905256]
entity EA Runtime--><rect fill="#FFFFFF" filter="url(#f1q5y9dx24psoc)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="124" x="679" y="329.8331"/><rect fill="#FFFFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="783" y="334.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="781" y="336.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="781" y="340.8331"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="694" y="362.8282">EA Runtime</text><!--MD5=[5b83bafd7c74b83ec51e270621bf56a2]
entity MR EA Client--><rect fill="#FFFFFF" filter="url(#f1q5y9dx24psoc)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="132" x="512" y="329.8331"/><rect fill="#FFFFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="624" y="334.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="622" y="336.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="622" y="340.8331"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="527" y="362.8282">MR EA Client</text><!--MD5=[756676c974634b40fab49708e7753de0]
entity IS HLM Client--><rect fill="#00FFFF" filter="url(#f1q5y9dx24psoc)" height="62.5938" style="stroke:#A80036;stroke-width:1.5;" width="134" x="1064" y="571.3331"/><rect fill="#00FFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1178" y="576.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1176" y="578.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1176" y="582.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="1083" y="604.3282">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="1079" y="620.6251">IS HLM Client</text><!--MD5=[5f97b384e251fd0806a911156a614b7f]
entity KS HLM Client--><rect fill="#00FFFF" filter="url(#f1q5y9dx24psoc)" height="62.5938" style="stroke:#A80036;stroke-width:1.5;" width="140" x="889" y="571.3331"/><rect fill="#00FFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="1009" y="576.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1007" y="578.3331"/><rect fill="#00FFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="1007" y="582.3331"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="911" y="604.3282">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="904" y="620.6251">KS HLM Client</text><!--MD5=[c924f980343bd788827f783d5a7edfc1]
entity IoTHub HLM Client--><rect fill="#FFFFFF" filter="url(#f1q5y9dx24psoc)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="171" x="682.5" y="579.8331"/><rect fill="#FFFFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="833.5" y="584.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="831.5" y="586.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="831.5" y="590.8331"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="697.5" y="612.8282">IoTHub HLM Client</text><!--MD5=[aa4aa3311aae7e180c9897bde274b371]
entity MR EH Client--><rect fill="#FFFFFF" filter="url(#f1q5y9dx24psoc)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="132" x="324" y="329.8331"/><rect fill="#FFFFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="436" y="334.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="434" y="336.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="434" y="340.8331"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="339" y="362.8282">MR EH Client</text><!--MD5=[59f73ad67132c429e47a2962912cd517]
entity IoTHub EH Client--><rect fill="#FFFFFF" filter="url(#f1q5y9dx24psoc)" height="46.2969" style="stroke:#A80036;stroke-width:1.5;" width="160" x="129" y="329.8331"/><rect fill="#FFFFFF" height="10" style="stroke:#A80036;stroke-width:1.5;" width="15" x="269" y="334.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="267" y="336.8331"/><rect fill="#FFFFFF" height="2" style="stroke:#A80036;stroke-width:1.5;" width="4" x="267" y="340.8331"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="144" y="362.8282">IoTHub EH Client</text><!--MD5=[2571bb1592dc874a255a7701a0171bbf]
entity Operator--><ellipse cx="1322" cy="131.3331" fill="#FEFECE" filter="url(#f1q5y9dx24psoc)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><path d="M1322,139.3331 L1322,166.3331 M1309,147.3331 L1335,147.3331 M1322,166.3331 L1309,181.3331 M1322,166.3331 L1335,181.3331 " fill="none" filter="url(#f1q5y9dx24psoc)" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1289" y="199.8282">Operator</text><!--MD5=[ff028a7ac4eed75d9278e76cd9053439]
entity HSM--><path d="M1217.5,1171.3331 C1217.5,1161.3331 1243,1161.3331 1243,1161.3331 C1243,1161.3331 1268.5,1161.3331 1268.5,1171.3331 L1268.5,1196.63 C1268.5,1206.63 1243,1206.63 1243,1206.63 C1243,1206.63 1217.5,1206.63 1217.5,1196.63 L1217.5,1171.3331 " fill="#FEFECE" filter="url(#f1q5y9dx24psoc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1217.5,1171.3331 C1217.5,1181.3331 1243,1181.3331 1243,1181.3331 C1243,1181.3331 1268.5,1181.3331 1268.5,1171.3331 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="1227.5" y="1198.3282">HSM</text><!--MD5=[11ecbcabae378fc48a88e79adafdb188]
entity KS_Config--><path d="M1008.5,1171.3331 C1008.5,1161.3331 1055,1161.3331 1055,1161.3331 C1055,1161.3331 1101.5,1161.3331 1101.5,1171.3331 L1101.5,1196.63 C1101.5,1206.63 1055,1206.63 1055,1206.63 C1055,1206.63 1008.5,1206.63 1008.5,1196.63 L1008.5,1171.3331 " fill="#FEFECE" filter="url(#f1q5y9dx24psoc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1008.5,1171.3331 C1008.5,1181.3331 1055,1181.3331 1055,1181.3331 C1055,1181.3331 1101.5,1181.3331 1101.5,1171.3331 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="1018.5" y="1198.3282">KS_Config</text><!--MD5=[2aa0c087703c6d91446931294913eabb]
entity CS_Config--><path d="M538.5,1171.3331 C538.5,1161.3331 585,1161.3331 585,1161.3331 C585,1161.3331 631.5,1161.3331 631.5,1171.3331 L631.5,1196.63 C631.5,1206.63 585,1206.63 585,1206.63 C585,1206.63 538.5,1206.63 538.5,1196.63 L538.5,1171.3331 " fill="#FEFECE" filter="url(#f1q5y9dx24psoc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M538.5,1171.3331 C538.5,1181.3331 585,1181.3331 585,1181.3331 C585,1181.3331 631.5,1181.3331 631.5,1171.3331 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="548.5" y="1198.3282">CS_Config</text><!--MD5=[2d8738bb92e9295d1373399849627c18]
entity IS_Config--><path d="M1042.5,1038.3331 C1042.5,1028.3331 1086,1028.3331 1086,1028.3331 C1086,1028.3331 1129.5,1028.3331 1129.5,1038.3331 L1129.5,1063.63 C1129.5,1073.63 1086,1073.63 1086,1073.63 C1086,1073.63 1042.5,1073.63 1042.5,1063.63 L1042.5,1038.3331 " fill="#FEFECE" filter="url(#f1q5y9dx24psoc)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1042.5,1038.3331 C1042.5,1048.3331 1086,1048.3331 1086,1048.3331 C1086,1048.3331 1129.5,1048.3331 1129.5,1038.3331 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="1052.5" y="1065.3282">IS_Config</text><!--MD5=[8653b4459334fbbbf517633636e5f0f4]
link Operator to DPS Gateway--><path d="M1337.72,203.1431 C1341.3,212.7911 1344.94,223.1251 1348,232.8331 C1385.94,353.3671 1420.16,499.4761 1435.08,565.8801 " fill="none" id="Operator-to-DPS Gateway" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1436.21,570.9061,1438.1402,561.2483,1435.1141,566.0277,1430.3347,563.0016,1436.21,570.9061" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[65764519f9d838083717bf16dc95b484]
link Operator to IoTHub Gateway--><path d="M1288.67,162.3331 C1177.89,162.3331 1067.11,162.3331 956.324,162.3331 " fill="none" id="Operator-to-IoTHub Gateway" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="951.049,162.3331,960.049,166.3331,956.049,162.3331,960.049,158.3331,951.049,162.3331" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d63ee6e7314cd6a0bff3b3c9dd1a6e38]
link Operator to PKI Service--><path d="M1288.74,147.2631 C1206.08,111.5931 984.395,26.9531 796.5,53.8331 C686.344,69.5931 563.235,110.3731 490.035,137.2031 " fill="none" id="Operator-to-PKI Service" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="485.286,138.9431,495.114,139.5836,489.9774,137.2139,492.3472,132.0773,485.286,138.9431" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[c750f082465d46bb52b42d8b8f3b4813]
link Operator to HSM--><path d="M1355.2,167.4431 C1435.75,179.4631 1635,222.2701 1635,351.8331 C1635,351.8331 1635,351.8331 1635,1051.8331 C1635,1127.8908 1366.19,1167.8146 1273.77,1179.2932 " fill="none" id="Operator-to-HSM" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1268.72,1179.9138,1278.1432,1182.7779,1273.6821,1179.2996,1277.1604,1174.8385,1268.72,1179.9138" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="1636" y="679.4">HSM tools</text><!--MD5=[b64139e04b25806d034a9609fbc498f1]
link Operator to KS_Config--><path d="M1325.28,203.0731 C1332.12,288.0171 1347.68,493.6181 1353,666.3331 C1359.02,861.9091 1412.32,925.3271 1338,1106.3331 C1332.27,1120.2997 1328.17,1123.9455 1315,1131.3331 C1297.05,1141.4064 1177.14,1162.5624 1106.6,1174.3841 " fill="none" id="Operator-to-KS_Config" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1101.6,1175.2189,1111.1314,1177.6993,1106.5332,1174.4044,1109.8281,1169.8062,1101.6,1175.2189" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[9c6a52b0e54635debeabca1453942af9]
link Operator to CS_Config--><path d="M1288.67,194.9531 C1230.75,247.7671 1105.47,352.7481 978,399.8331 C912.599,423.9911 715.354,383.5881 666,432.8331 C613.65,485.0681 590.622,1028.9711 585.927,1156.2804 " fill="none" id="Operator-to-CS_Config" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="585.742,1161.332,590.0685,1152.4844,585.9249,1156.3354,582.0739,1152.1917,585.742,1161.332" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[fafc128abf58ddb02bcf3db2f67a42d9]
link Operator to IS_Config--><path d="M1355.14,172.1931 C1421.42,192.1331 1564,247.1861 1564,351.8331 C1564,351.8331 1564,351.8331 1564,827.8331 C1564,1016.7681 1295.73,797.5511 1148,915.3331 C1114.08,942.3801 1097.94,992.2061 1090.88,1023.0321 " fill="none" id="Operator-to-IS_Config" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1089.74,1028.1831,1095.5839,1020.2554,1090.8165,1023.3004,1087.7715,1018.533,1089.74,1028.1831" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f7f4374d74a0dafac0de0dcb25a2eadc]
link IS MR Client to IS API Server--><path d="M192.678,795.1211 C204.504,765.6231 226.706,723.4381 262,704.3331 C331.182,666.8851 897.738,673.2411 970,704.3331 C1010.77,721.8761 1043.92,761.5781 1064.19,791.0561 " fill="none" id="IS MR Client-to-IS API Server" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1067.08,795.3271,1065.3452,785.6323,1064.2763,791.1872,1058.7213,790.1182,1067.08,795.3271" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="530" y="679.4">IPC</text><!--MD5=[30ae9fcea06dd066621be03fe1b356e0]
link CS MR Client to CS API Server--><path d="M365.188,858.7011 C390.678,899.7071 435.588,971.9521 462.29,1014.9071 " fill="none" id="CS MR Client-to-CS API Server" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="464.975,1019.2271,463.6218,1009.4717,462.3358,1014.9804,456.8271,1013.6944,464.975,1019.2271" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="396" y="903.4">IPC</text><!--MD5=[1008acadb4c2978c020300657155410c]
link KS MR Client to KS API Server--><path d="M571.786,858.4681 C651.455,899.9861 793.164,973.8341 875.297,1016.6361 " fill="none" id="KS MR Client-to-KS API Server" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="880.134,1019.1561,874.0002,1011.4505,875.6996,1016.8461,870.3041,1018.5455,880.134,1019.1561" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="664" y="903.4">IPC</text><!--MD5=[caf37a410bcb8a01c5d400ac6afc0bbc]
link IS HLM Client to IS API Server--><path d="M1124.74,634.7011 C1116.48,675.4581 1101.96,747.0781 1093.24,790.1231 " fill="none" id="IS HLM Client-to-IS API Server" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1092.2,795.2271,1097.9076,787.2007,1093.1929,790.3267,1090.067,785.612,1092.2,795.2271" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="1118" y="679.4">IPC</text><!--MD5=[e7bef9d86d67ba123ad5379dfd91a874]
link KS HLM Client to KS API Server--><path d="M957.625,634.4881 C954.042,714.3911 944.43,928.7411 940.604,1014.0711 " fill="none" id="KS HLM Client-to-KS API Server" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="940.371,1019.2591,944.7707,1010.4476,940.5953,1014.2642,936.7788,1010.0887,940.371,1019.2591" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="956" y="831.4">IPC</text><!--MD5=[6804a73eee8e7028acdf854589507bfe]
link MR EH Client to MR API Server--><path d="M390,375.8411 C390,421.1351 390,524.6791 390,574.3121 " fill="none" id="MR EH Client-to-MR API Server" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="390,579.5171,394,570.5171,390,574.5171,386,570.5171,390,579.5171" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="391" y="420.9">IPC</text><!--MD5=[989b15a203ee7fd66555711c1bdf2e5d]
link MR EA Client to MR API Server--><path d="M561.316,375.8411 C526.703,421.5011 447.214,526.3601 409.957,575.5071 " fill="none" id="MR EA Client-to-MR API Server" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="406.917,579.5171,415.5413,574.7609,409.9373,575.5324,409.1658,569.9284,406.917,579.5171" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="534" y="420.9">IPC</text><!--MD5=[28ddb885fa13667552cb7de1667e3457]
link MR API Server to IS MR Client--><path d="M348.51,625.8941 C321.617,641.6171 287.058,664.6441 262,691.3331 C234.198,720.9451 211.585,761.8421 197.581,790.7431 " fill="none" id="MR API Server-to-IS MR Client" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="195.408,795.2751,202.9056,788.8887,197.5695,790.7665,195.6917,785.4304,195.408,795.2751" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[4c4b7c7619f8975f5a871590d840d99f]
link MR API Server to CS MR Client--><path d="M385.62,625.9311 C378.007,664.3421 362.27,743.7441 353.086,790.0821 " fill="none" id="MR API Server-to-CS MR Client" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="352.109,795.0121,357.7837,786.9625,353.0819,790.1077,349.9366,785.4058,352.109,795.0121" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[51c6f3a2b7f646dbcbed439c36e2ccd8]
link MR API Server to KS MR Client--><path d="M402.243,625.9311 C423.569,664.4201 467.696,744.0661 493.348,790.3631 " fill="none" id="MR API Server-to-KS MR Client" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="495.924,795.0121,495.061,785.2011,493.5008,790.6386,488.0633,789.0783,495.924,795.0121" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[e720ecd5333c3e6747c8d16060e24f97]
link IS API Server to CS API Server--><path d="M1025.69,858.4301 C1008,866.7861 988.442,875.4291 970,882.3331 C919.801,901.1241 904.998,898.8331 854,915.3331 C750.12,948.9421 631.814,992.9781 557.534,1021.3411 " fill="none" id="IS API Server-to-CS API Server" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="552.705,1023.1871,562.54,1023.7089,557.3752,1021.4013,559.6828,1016.2365,552.705,1023.1871" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[db6dbaabfcb5827078ae7818afaacb80]
link IS API Server to TPMS API Server--><path d="M1107.83,858.7011 C1136.83,899.7071 1187.92,971.9521 1218.3,1014.9071 " fill="none" id="IS API Server-to-TPMS API Server" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1221.36,1019.2271,1219.4328,1009.5687,1218.4745,1015.1438,1212.8994,1014.1854,1221.36,1019.2271" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[be9537374aefee3a52829d99303fa4e2]
link KS API Server to HSM--><path d="M982.97,1082.3951 C996.134,1090.7971 1010.84,1099.4741 1025,1106.3331 C1089.17,1137.4232 1169.34,1162.2242 1212.35,1174.4782 " fill="none" id="KS API Server-to-HSM" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1217.41,1175.91,1209.8341,1169.6167,1212.5978,1174.5525,1207.662,1177.3162,1217.41,1175.91" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="1078" y="1127.4">aziot-keys</text><!--MD5=[95bd25dcabcd2fe970e8ef6d917c59c1]
link TPMS API Server to HSM--><path d="M1243,1082.5471 C1243,1104.8561 1243,1134.7497 1243,1156.082 " fill="none" id="TPMS API Server-to-HSM" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1243,1161.3112,1247,1152.3112,1243,1156.3112,1239,1152.3112,1243,1161.3112" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="1244" y="1127.4">aziot-tpm</text><!--MD5=[0ec0b1c00808d2d43efbd3f658751262]
link IS API Server to IS_Config--><path d="M1086,858.7011 C1086,902.4601 1086,981.7961 1086,1023.1461 " fill="none" id="IS API Server-to-IS_Config" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1086,1028.2381,1090,1019.2381,1086,1023.2381,1082,1019.2381,1086,1028.2381" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[34ec41cfc1c7b579f14b0532db03187f]
link CS API Server to CS_Config--><path d="M507.68,1082.5471 C525.172,1105.2341 548.711,1135.7653 565.206,1157.1592 " fill="none" id="CS API Server-to-CS_Config" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="568.407,1161.3112,566.0799,1151.7412,565.3542,1157.3513,559.7441,1156.6257,568.407,1161.3112" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[1fd5ab5a4360626f892f5df4f4d73889]
link KS API Server to KS_Config--><path d="M966.197,1082.5471 C986.37,1105.3291 1013.55,1136.0198 1032.5,1157.4262 " fill="none" id="KS API Server-to-KS_Config" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1035.94,1161.3112,1032.9674,1151.9217,1032.625,1157.5682,1026.9785,1157.2257,1035.94,1161.3112" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6437316005e372b013bcebfc39248628]
reverse link IoTHub Gateway to IS API Server--><path d="M946.371,196.4131 C1028.92,238.1851 1158.7,318.6361 1214,432.8331 C1257.68,523.0351 1246.12,563.3981 1214,658.3331 C1195.47,713.1091 1151.05,764.0751 1119.76,795.0691 " fill="none" id="IoTHub Gateway-backto-IS API Server" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="941.495,193.9631,947.7346,201.5834,945.9608,196.2118,951.3324,194.438,941.495,193.9631" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="1210" y="420.9">HTTPS</text><!--MD5=[f062dee797d7b0105199cffe6fb14117]
link IS API Server to KS API Server--><path d="M1064.24,858.4031 C1052.46,875.1121 1037.75,896.2381 1025,915.3331 C1002.644,948.8061 977.975,987.5871 960.813,1014.8811 " fill="none" id="IS API Server-to-KS API Server" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="958.125,1019.1601,966.3005,1013.6682,960.7854,1014.9266,959.5269,1009.4116,958.125,1019.1601" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="1042" y="903.4">IPC</text><!--MD5=[e067edb8b6787edeb92255ee41180f85]
reverse link PKI Service to CS API Server--><path d="M359.795,164.0631 C242.04,169.1831 6,198.5731 6,351.8331 C6,351.8331 6,351.8331 6,827.8331 C6,1006.1431 282.988,1041.6261 415.26,1048.4041 " fill="none" id="PKI Service-backto-CS API Server" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="364.968,163.8431,355.8112,160.2165,359.9722,164.0487,356.14,168.2097,364.968,163.8431" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="7" y="607.4">HTTPS (EST)</text><!--MD5=[1ba61940d09e9bcc638ddaa746e5f6f8]
link IoTHub Gateway to IoTHub EH Client--><path d="M789.529,175.9031 C637.132,199.0431 327.434,247.0151 306,257.8331 C274.27,273.8481 246.11,303.8491 228.416,325.6621 " fill="none" id="IoTHub Gateway-IoTHub EH Client" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="225.235,329.6341,233.9832,325.1098,228.3606,325.7315,227.7389,320.1089,225.235,329.6341" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="794.883,175.0931,785.384,172.4912,789.9398,175.8446,786.5864,180.4004,794.883,175.0931" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="428" y="245.9">AMQP (EH Module)</text><!--MD5=[cbcbca9f985bb6aa0d9e9d43e5dd7433]
link IoTHub Gateway to IoTHub HLM Client--><path d="M865.141,198.9131 C854.848,245.2461 836.094,328.7151 819,399.8331 C803.912,462.6031 785.072,536.0381 775.046,574.7541 " fill="none" id="IoTHub Gateway-IoTHub HLM Client" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="773.75,579.7551,779.8799,572.0464,775.0043,574.915,772.1357,570.0395,773.75,579.7551" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="866.233,194.0031,860.3744,201.92,865.1474,198.8839,868.1836,203.6569,866.233,194.0031" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="853" y="357.4">AMQP (HL Module)</text><!--MD5=[847749b71113e909cc8a19318a9f9a5c]
reverse link DPS Gateway to IS API Server--><path d="M1389.27,637.2431 C1320.42,680.0621 1202,753.6991 1135.33,795.1561 " fill="none" id="DPS Gateway-backto-IS API Server" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1393.74,634.4681,1383.9821,635.8032,1389.4884,637.0995,1388.1922,642.6058,1393.74,634.4681" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="1338" y="679.4">HTTPS</text><!--MD5=[a20d16dcaadd67f259e89e744d6fba35]
reverse link IoTHub Gateway to EA Runtime--><path d="M834.972,197.6131 C824.25,208.3011 813.053,220.5291 804,232.8331 C781.002,264.0891 761.34,304.8461 750.358,329.6401 " fill="none" id="IoTHub Gateway-backto-EA Runtime" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="838.586,194.0431,829.3709,197.5191,835.0277,197.5557,834.9911,203.2125,838.586,194.0431" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="805" y="245.9">HTTPS</text><!--MD5=[2a578e84c76fc924351bd09abe23b0cd]
@startuml
title Data Flow - new architecture

actor Operator
cloud "DPS Service" {
    [DPS Gateway] <<service>>
}

cloud "PKI" {
    [PKI Service] <<service>>
}

cloud "IoT Hub Service" {
    [IoTHub Gateway] <<service>>
}

node "Identity Service" <<new>> {
    [IS API Server] <<newclient>>
}

node "TPM Service" <<new>> {
    [TPMS API Server] <<newclient>>
}

node "Key Service" <<new>> {
    [KS API Server] <<newclient>>
    [KS API Server] <<newclient>>
}

node "Certificate Service" <<new>> {
    [CS API Server] <<newclient>>
}

node "Edge Module Runtime" <<modified>> {
    folder "MR Legacy Service" {
        [MR API Server]
    }
    [IS MR Client] <<newclient>>
    [CS MR Client] <<newclient>>
    [KS MR Client] <<newclient>>
}
node "Edge Agent" {
    [EA Runtime]
    [MR EA Client]
}
node "Host-level module" {
    [IS HLM Client] <<newclient>>
    [KS HLM Client] <<newclient>>
    [IoTHub HLM Client]
}
node "Edge Hub" {
    [MR EH Client]
    [IoTHub EH Client]
}

database "HSM"
database "KS_Config"
database "CS_Config"
database "IS_Config"


Operator -right-> [DPS Gateway]
Operator -right-> [IoTHub Gateway]
Operator -right-> [PKI Service]
Operator -right-> HSM: HSM tools
Operator -right-> KS_Config
Operator -right-> CS_Config
Operator -right-> IS_Config

[IS MR Client] -down-> [IS API Server] : IPC
[CS MR Client] -down-> [CS API Server] : IPC
[KS MR Client] -down-> [KS API Server] : IPC
[IS HLM Client] -down-> [IS API Server] : IPC
[KS HLM Client] -down-> [KS API Server] : IPC
[MR EH Client] - -> [MR API Server] : IPC
[MR EA Client] - -> [MR API Server] : IPC

[MR API Server] -down-> [IS MR Client]
[MR API Server] -down-> [CS MR Client]
[MR API Server] -down-> [KS MR Client]
[IS API Server] -down-> [CS API Server]
[IS API Server] -down-> [TPMS API Server]
[KS API Server] -down-> HSM : aziot-keys
[TPMS API Server] -down-> HSM : aziot-tpm
[IS API Server] - -> IS_Config
[CS API Server] - -> CS_Config
[KS API Server] - -> KS_Config

[IS API Server] -up-> [IoTHub Gateway] : HTTPS
[IS API Server] -down-> [KS API Server] : IPC
[CS API Server] -up-> [PKI Service] : HTTPS (EST)

[IoTHub EH Client] <-up-> [IoTHub Gateway] : AMQP (EH Module)
[IoTHub HLM Client] <-up-> [IoTHub Gateway] : AMQP (HL Module)
[IS API Server] -up-> [DPS Gateway] : HTTPS

[EA Runtime] -up-> [IoTHub Gateway] : HTTPS

skinparam node {
	backgroundColor<<new>> Magenta
	backgroundColor<<modified>> Yellow
}

skinparam component {
    backgroundColor White
    backgroundColor<<newclient>> Cyan
    backgroundColor<<modified>> Yellow
    backgroundColor<<service>> White
}
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>