<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1155px" preserveAspectRatio="none" style="width:1540px;height:1155px;" version="1.1" viewBox="0 0 1540 1155" width="1540px" zoomAndPan="magnify"><defs><filter height="300%" id="f11fo1zgmqbze1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="259" x="644" y="16.708">Data Flow - new architecture</text><!--cluster DPS Service--><path d="M1213,490.9531 C1213,487.9531 1215,485.9531 1218,485.9531 C1221,485.9531 1223,487.9531 1223,490.9531 C1223,487.9531 1225,485.9531 1228,485.9531 C1231,485.9531 1233,487.9531 1233,490.9531 C1233,487.9531 1235,485.9531 1238,485.9531 C1241,485.9531 1243,487.9531 1243,490.9531 C1243,487.9531 1245,485.9531 1248,485.9531 C1251,485.9531 1253,487.9531 1253,490.9531 C1253,487.9531 1255,485.9531 1258,485.9531 C1261,485.9531 1263,487.9531 1263,490.9531 C1263,487.9531 1265,485.9531 1268,485.9531 C1271,485.9531 1273,487.9531 1273,490.9531 C1273,487.9531 1275,485.9531 1278,485.9531 C1281,485.9531 1283,487.9531 1283,490.9531 C1283,487.9531 1285,485.9531 1288,485.9531 C1291,485.9531 1293,487.9531 1293,490.9531 C1293,487.9531 1295,485.9531 1298,485.9531 C1301,485.9531 1303,487.9531 1303,490.9531 C1303,487.9531 1305,485.9531 1308,485.9531 C1311,485.9531 1313,487.9531 1313,490.9531 C1313,487.9531 1315,485.9531 1318,485.9531 C1321,485.9531 1323,487.9531 1323,490.9531 C1323,487.9531 1325,485.9531 1328,485.9531 C1331,485.9531 1333,487.9531 1333,490.9531 C1333,487.9531 1335,485.9531 1338,485.9531 C1341,485.9531 1343,487.9531 1343,490.9531 C1343,487.9531 1345,485.9531 1348,485.9531 C1351,485.9531 1353,487.9531 1353,490.9531 C1356,490.9531 1358,492.9531 1358,495.9531 C1358,498.9531 1356,500.9531 1353,500.9531 C1356,500.9531 1358,502.9531 1358,505.9531 C1358,508.9531 1356,510.9531 1353,510.9531 C1356,510.9531 1358,512.9531 1358,515.9531 C1358,518.9531 1356,520.9531 1353,520.9531 C1356,520.9531 1358,522.9531 1358,525.9531 C1358,528.9531 1356,530.9531 1353,530.9531 C1356,530.9531 1358,532.9531 1358,535.9531 C1358,538.9531 1356,540.9531 1353,540.9531 C1356,540.9531 1358,542.9531 1358,545.9531 C1358,548.9531 1356,550.9531 1353,550.9531 C1356,550.9531 1358,552.9531 1358,555.9531 C1358,558.9531 1356,560.9531 1353,560.9531 C1356,560.9531 1358,562.9531 1358,565.9531 C1358,568.9531 1356,570.9531 1353,570.9531 C1356,570.9531 1358,572.9531 1358,575.9531 C1358,578.9531 1356,580.9531 1353,580.9531 C1356,580.9531 1358,582.9531 1358,585.9531 C1358,588.9531 1356,590.9531 1353,590.9531 C1356,590.9531 1358,592.9531 1358,595.9531 C1358,598.9531 1356,600.9531 1353,600.9531 C1353,603.9531 1350,605.9531 1348,605.9531 C1345,605.9531 1343,603.9531 1343,600.9531 C1343,603.9531 1340,605.9531 1338,605.9531 C1335,605.9531 1333,603.9531 1333,600.9531 C1333,603.9531 1330,605.9531 1328,605.9531 C1325,605.9531 1323,603.9531 1323,600.9531 C1323,603.9531 1320,605.9531 1318,605.9531 C1315,605.9531 1313,603.9531 1313,600.9531 C1313,603.9531 1310,605.9531 1308,605.9531 C1305,605.9531 1303,603.9531 1303,600.9531 C1303,603.9531 1300,605.9531 1298,605.9531 C1295,605.9531 1293,603.9531 1293,600.9531 C1293,603.9531 1290,605.9531 1288,605.9531 C1285,605.9531 1283,603.9531 1283,600.9531 C1283,603.9531 1280,605.9531 1278,605.9531 C1275,605.9531 1273,603.9531 1273,600.9531 C1273,603.9531 1270,605.9531 1268,605.9531 C1265,605.9531 1263,603.9531 1263,600.9531 C1263,603.9531 1260,605.9531 1258,605.9531 C1255,605.9531 1253,603.9531 1253,600.9531 C1253,603.9531 1250,605.9531 1248,605.9531 C1245,605.9531 1243,603.9531 1243,600.9531 C1243,603.9531 1240,605.9531 1238,605.9531 C1235,605.9531 1233,603.9531 1233,600.9531 C1233,603.9531 1230,605.9531 1228,605.9531 C1225,605.9531 1223,603.9531 1223,600.9531 C1223,603.9531 1220,605.9531 1218,605.9531 C1215,605.9531 1213,603.9531 1213,600.9531 C1210,600.9531 1208,598.9531 1208,595.9531 C1208,592.9531 1210,590.9531 1213,590.9531 C1210,590.9531 1208,588.9531 1208,585.9531 C1208,582.9531 1210,580.9531 1213,580.9531 C1210,580.9531 1208,578.9531 1208,575.9531 C1208,572.9531 1210,570.9531 1213,570.9531 C1210,570.9531 1208,568.9531 1208,565.9531 C1208,562.9531 1210,560.9531 1213,560.9531 C1210,560.9531 1208,558.9531 1208,555.9531 C1208,552.9531 1210,550.9531 1213,550.9531 C1210,550.9531 1208,548.9531 1208,545.9531 C1208,542.9531 1210,540.9531 1213,540.9531 C1210,540.9531 1208,538.9531 1208,535.9531 C1208,532.9531 1210,530.9531 1213,530.9531 C1210,530.9531 1208,528.9531 1208,525.9531 C1208,522.9531 1210,520.9531 1213,520.9531 C1210,520.9531 1208,518.9531 1208,515.9531 C1208,512.9531 1210,510.9531 1213,510.9531 C1210,510.9531 1208,508.9531 1208,505.9531 C1208,502.9531 1210,500.9531 1213,500.9531 C1210,500.9531 1208,498.9531 1208,495.9531 C1208,492.9531 1210,490.9531 1213,490.9531 " fill="#FFFFFF" filter="url(#f11fo1zgmqbze1)" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="1234.5" y="509.9482">DPS Service</text><!--cluster PKI--><path d="M310,64.4531 C310,61.4531 312,59.4531 315,59.4531 C318,59.4531 320,61.4531 320,64.4531 C320,61.4531 322,59.4531 325,59.4531 C328,59.4531 330,61.4531 330,64.4531 C330,61.4531 332,59.4531 335,59.4531 C338,59.4531 340,61.4531 340,64.4531 C340,61.4531 342,59.4531 345,59.4531 C348,59.4531 350,61.4531 350,64.4531 C350,61.4531 352,59.4531 355,59.4531 C358,59.4531 360,61.4531 360,64.4531 C360,61.4531 362,59.4531 365,59.4531 C368,59.4531 370,61.4531 370,64.4531 C370,61.4531 372,59.4531 375,59.4531 C378,59.4531 380,61.4531 380,64.4531 C380,61.4531 382,59.4531 385,59.4531 C388,59.4531 390,61.4531 390,64.4531 C390,61.4531 392,59.4531 395,59.4531 C398,59.4531 400,61.4531 400,64.4531 C400,61.4531 402,59.4531 405,59.4531 C408,59.4531 410,61.4531 410,64.4531 C410,61.4531 412,59.4531 415,59.4531 C418,59.4531 420,61.4531 420,64.4531 C420,61.4531 422,59.4531 425,59.4531 C428,59.4531 430,61.4531 430,64.4531 C433,64.4531 435,66.4531 435,69.4531 C435,72.4531 433,74.4531 430,74.4531 C433,74.4531 435,76.4531 435,79.4531 C435,82.4531 433,84.4531 430,84.4531 C433,84.4531 435,86.4531 435,89.4531 C435,92.4531 433,94.4531 430,94.4531 C433,94.4531 435,96.4531 435,99.4531 C435,102.4531 433,104.4531 430,104.4531 C433,104.4531 435,106.4531 435,109.4531 C435,112.4531 433,114.4531 430,114.4531 C433,114.4531 435,116.4531 435,119.4531 C435,122.4531 433,124.4531 430,124.4531 C433,124.4531 435,126.4531 435,129.4531 C435,132.4531 433,134.4531 430,134.4531 C433,134.4531 435,136.4531 435,139.4531 C435,142.4531 433,144.4531 430,144.4531 C433,144.4531 435,146.4531 435,149.4531 C435,152.4531 433,154.4531 430,154.4531 C433,154.4531 435,156.4531 435,159.4531 C435,162.4531 433,164.4531 430,164.4531 C433,164.4531 435,166.4531 435,169.4531 C435,172.4531 433,174.4531 430,174.4531 C430,177.4531 427,179.4531 425,179.4531 C422,179.4531 420,177.4531 420,174.4531 C420,177.4531 417,179.4531 415,179.4531 C412,179.4531 410,177.4531 410,174.4531 C410,177.4531 407,179.4531 405,179.4531 C402,179.4531 400,177.4531 400,174.4531 C400,177.4531 397,179.4531 395,179.4531 C392,179.4531 390,177.4531 390,174.4531 C390,177.4531 387,179.4531 385,179.4531 C382,179.4531 380,177.4531 380,174.4531 C380,177.4531 377,179.4531 375,179.4531 C372,179.4531 370,177.4531 370,174.4531 C370,177.4531 367,179.4531 365,179.4531 C362,179.4531 360,177.4531 360,174.4531 C360,177.4531 357,179.4531 355,179.4531 C352,179.4531 350,177.4531 350,174.4531 C350,177.4531 347,179.4531 345,179.4531 C342,179.4531 340,177.4531 340,174.4531 C340,177.4531 337,179.4531 335,179.4531 C332,179.4531 330,177.4531 330,174.4531 C330,177.4531 327,179.4531 325,179.4531 C322,179.4531 320,177.4531 320,174.4531 C320,177.4531 317,179.4531 315,179.4531 C312,179.4531 310,177.4531 310,174.4531 C307,174.4531 305,172.4531 305,169.4531 C305,166.4531 307,164.4531 310,164.4531 C307,164.4531 305,162.4531 305,159.4531 C305,156.4531 307,154.4531 310,154.4531 C307,154.4531 305,152.4531 305,149.4531 C305,146.4531 307,144.4531 310,144.4531 C307,144.4531 305,142.4531 305,139.4531 C305,136.4531 307,134.4531 310,134.4531 C307,134.4531 305,132.4531 305,129.4531 C305,126.4531 307,124.4531 310,124.4531 C307,124.4531 305,122.4531 305,119.4531 C305,116.4531 307,114.4531 310,114.4531 C307,114.4531 305,112.4531 305,109.4531 C305,106.4531 307,104.4531 310,104.4531 C307,104.4531 305,102.4531 305,99.4531 C305,96.4531 307,94.4531 310,94.4531 C307,94.4531 305,92.4531 305,89.4531 C305,86.4531 307,84.4531 310,84.4531 C307,84.4531 305,82.4531 305,79.4531 C305,76.4531 307,74.4531 310,74.4531 C307,74.4531 305,72.4531 305,69.4531 C305,66.4531 307,64.4531 310,64.4531 " fill="#FFFFFF" filter="url(#f11fo1zgmqbze1)" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="358.5" y="83.4482">PKI</text><!--cluster IoT Hub Service--><path d="M676,64.4531 C676,61.4531 678,59.4531 681,59.4531 C684,59.4531 686,61.4531 686,64.4531 C686,61.4531 688,59.4531 691,59.4531 C694,59.4531 696,61.4531 696,64.4531 C696,61.4531 698,59.4531 701,59.4531 C704,59.4531 706,61.4531 706,64.4531 C706,61.4531 708,59.4531 711,59.4531 C714,59.4531 716,61.4531 716,64.4531 C716,61.4531 718,59.4531 721,59.4531 C724,59.4531 726,61.4531 726,64.4531 C726,61.4531 728,59.4531 731,59.4531 C734,59.4531 736,61.4531 736,64.4531 C736,61.4531 738,59.4531 741,59.4531 C744,59.4531 746,61.4531 746,64.4531 C746,61.4531 748,59.4531 751,59.4531 C754,59.4531 756,61.4531 756,64.4531 C756,61.4531 758,59.4531 761,59.4531 C764,59.4531 766,61.4531 766,64.4531 C766,61.4531 768,59.4531 771,59.4531 C774,59.4531 776,61.4531 776,64.4531 C776,61.4531 778,59.4531 781,59.4531 C784,59.4531 786,61.4531 786,64.4531 C786,61.4531 788,59.4531 791,59.4531 C794,59.4531 796,61.4531 796,64.4531 C796,61.4531 798,59.4531 801,59.4531 C804,59.4531 806,61.4531 806,64.4531 C806,61.4531 808,59.4531 811,59.4531 C814,59.4531 816,61.4531 816,64.4531 C816,61.4531 818,59.4531 821,59.4531 C824,59.4531 826,61.4531 826,64.4531 C826,61.4531 828,59.4531 831,59.4531 C834,59.4531 836,61.4531 836,64.4531 C839,64.4531 841,66.4531 841,69.4531 C841,72.4531 839,74.4531 836,74.4531 C839,74.4531 841,76.4531 841,79.4531 C841,82.4531 839,84.4531 836,84.4531 C839,84.4531 841,86.4531 841,89.4531 C841,92.4531 839,94.4531 836,94.4531 C839,94.4531 841,96.4531 841,99.4531 C841,102.4531 839,104.4531 836,104.4531 C839,104.4531 841,106.4531 841,109.4531 C841,112.4531 839,114.4531 836,114.4531 C839,114.4531 841,116.4531 841,119.4531 C841,122.4531 839,124.4531 836,124.4531 C839,124.4531 841,126.4531 841,129.4531 C841,132.4531 839,134.4531 836,134.4531 C839,134.4531 841,136.4531 841,139.4531 C841,142.4531 839,144.4531 836,144.4531 C839,144.4531 841,146.4531 841,149.4531 C841,152.4531 839,154.4531 836,154.4531 C839,154.4531 841,156.4531 841,159.4531 C841,162.4531 839,164.4531 836,164.4531 C839,164.4531 841,166.4531 841,169.4531 C841,172.4531 839,174.4531 836,174.4531 C836,177.4531 833,179.4531 831,179.4531 C828,179.4531 826,177.4531 826,174.4531 C826,177.4531 823,179.4531 821,179.4531 C818,179.4531 816,177.4531 816,174.4531 C816,177.4531 813,179.4531 811,179.4531 C808,179.4531 806,177.4531 806,174.4531 C806,177.4531 803,179.4531 801,179.4531 C798,179.4531 796,177.4531 796,174.4531 C796,177.4531 793,179.4531 791,179.4531 C788,179.4531 786,177.4531 786,174.4531 C786,177.4531 783,179.4531 781,179.4531 C778,179.4531 776,177.4531 776,174.4531 C776,177.4531 773,179.4531 771,179.4531 C768,179.4531 766,177.4531 766,174.4531 C766,177.4531 763,179.4531 761,179.4531 C758,179.4531 756,177.4531 756,174.4531 C756,177.4531 753,179.4531 751,179.4531 C748,179.4531 746,177.4531 746,174.4531 C746,177.4531 743,179.4531 741,179.4531 C738,179.4531 736,177.4531 736,174.4531 C736,177.4531 733,179.4531 731,179.4531 C728,179.4531 726,177.4531 726,174.4531 C726,177.4531 723,179.4531 721,179.4531 C718,179.4531 716,177.4531 716,174.4531 C716,177.4531 713,179.4531 711,179.4531 C708,179.4531 706,177.4531 706,174.4531 C706,177.4531 703,179.4531 701,179.4531 C698,179.4531 696,177.4531 696,174.4531 C696,177.4531 693,179.4531 691,179.4531 C688,179.4531 686,177.4531 686,174.4531 C686,177.4531 683,179.4531 681,179.4531 C678,179.4531 676,177.4531 676,174.4531 C673,174.4531 671,172.4531 671,169.4531 C671,166.4531 673,164.4531 676,164.4531 C673,164.4531 671,162.4531 671,159.4531 C671,156.4531 673,154.4531 676,154.4531 C673,154.4531 671,152.4531 671,149.4531 C671,146.4531 673,144.4531 676,144.4531 C673,144.4531 671,142.4531 671,139.4531 C671,136.4531 673,134.4531 676,134.4531 C673,134.4531 671,132.4531 671,129.4531 C671,126.4531 673,124.4531 676,124.4531 C673,124.4531 671,122.4531 671,119.4531 C671,116.4531 673,114.4531 676,114.4531 C673,114.4531 671,112.4531 671,109.4531 C671,106.4531 673,104.4531 676,104.4531 C673,104.4531 671,102.4531 671,99.4531 C671,96.4531 673,94.4531 676,94.4531 C673,94.4531 671,92.4531 671,89.4531 C671,86.4531 673,84.4531 676,84.4531 C673,84.4531 671,82.4531 671,79.4531 C671,76.4531 673,74.4531 676,74.4531 C673,74.4531 671,72.4531 671,69.4531 C671,66.4531 673,64.4531 676,64.4531 " fill="#FFFFFF" filter="url(#f11fo1zgmqbze1)" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="693" y="83.4482">IoT Hub Service</text><!--cluster Identity Service--><polygon fill="#FF00FF" filter="url(#f11fo1zgmqbze1)" points="886,665.9531,896,655.9531,1085,655.9531,1085,810.9531,1075,820.9531,886,820.9531,886,665.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1075" x2="1084" y1="665.9531" y2="656.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="886" x2="1075" y1="665.9531" y2="665.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1075" x2="1075" y1="665.9531" y2="820.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="958" y="681.9482">«new»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="123" x="920" y="698.2451">Identity Service</text><!--cluster TPM Service--><polygon fill="#FF00FF" filter="url(#f11fo1zgmqbze1)" points="1019,879.9531,1029,869.9531,1192,869.9531,1192,1024.9531,1182,1034.9531,1019,1034.9531,1019,879.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1182" x2="1191" y1="879.9531" y2="870.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1019" x2="1182" y1="879.9531" y2="879.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1182" x2="1182" y1="879.9531" y2="1034.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="1078" y="895.9482">«new»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="1053" y="912.2451">TPM Service</text><!--cluster Key Service--><polygon fill="#FF00FF" filter="url(#f11fo1zgmqbze1)" points="732,879.9531,742,869.9531,902,869.9531,902,1024.9531,892,1034.9531,732,1034.9531,732,879.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="892" x2="901" y1="879.9531" y2="870.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="732" x2="892" y1="879.9531" y2="879.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="892" x2="892" y1="879.9531" y2="1034.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="789.5" y="895.9482">«new»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="766" y="912.2451">Key Service</text><!--cluster Certificate Service--><polygon fill="#FF00FF" filter="url(#f11fo1zgmqbze1)" points="305,879.9531,315,869.9531,527,869.9531,527,1024.9531,517,1034.9531,305,1034.9531,305,879.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="517" x2="526" y1="879.9531" y2="870.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="305" x2="517" y1="879.9531" y2="879.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="517" x2="517" y1="879.9531" y2="1034.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="388.5" y="895.9482">«new»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="146" x="339" y="912.2451">Certificate Service</text><!--cluster Edge Module Runtime--><polygon fill="#FFFF00" filter="url(#f11fo1zgmqbze1)" points="103,417.4531,113,407.4531,524,407.4531,524,810.9531,514,820.9531,103,820.9531,103,417.4531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="514" x2="523" y1="417.4531" y2="408.4531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="103" x2="514" y1="417.4531" y2="417.4531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="514" x2="514" y1="417.4531" y2="820.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="271" y="433.4482">«modified»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="224.5" y="449.7451">Edge Module Runtime</text><!--cluster MR Legacy Service--><polygon fill="#FFFF00" filter="url(#f11fo1zgmqbze1)" points="251,492.4531,405,492.4531,412,514.75,415,514.75,415,598.4531,251,598.4531,251,492.4531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="251" x2="412" y1="514.75" y2="514.75"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="255" y="507.4482">MR Legacy Service</text><!--cluster Edge Agent--><polygon fill="#FFFFFF" filter="url(#f11fo1zgmqbze1)" points="427,252.4531,437,242.4531,701,242.4531,701,348.4531,691,358.4531,427,358.4531,427,252.4531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="691" x2="700" y1="252.4531" y2="243.4531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="427" x2="691" y1="252.4531" y2="252.4531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="691" x2="691" y1="252.4531" y2="358.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="514.5" y="268.4482">Edge Agent</text><!--cluster Host-level module--><polygon fill="#FFFFFF" filter="url(#f11fo1zgmqbze1)" points="595,483.9531,605,473.9531,1065,473.9531,1065,596.9531,1055,606.9531,595,606.9531,595,483.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1055" x2="1064" y1="483.9531" y2="474.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="595" x2="1055" y1="483.9531" y2="483.9531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1055" x2="1055" y1="483.9531" y2="606.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="755" y="499.9482">Host-level module</text><!--cluster Edge Hub--><polygon fill="#FFFFFF" filter="url(#f11fo1zgmqbze1)" points="92,252.4531,102,242.4531,403,242.4531,403,348.4531,393,358.4531,92,358.4531,92,252.4531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="393" x2="402" y1="252.4531" y2="243.4531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="92" x2="393" y1="252.4531" y2="252.4531"/><line style="stroke: #000000; stroke-width: 1.5;" x1="393" x2="393" y1="252.4531" y2="358.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="206" y="268.4482">Edge Hub</text><!--entity DPS Gateway--><rect fill="#FFFFFF" filter="url(#f11fo1zgmqbze1)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="1226" y="537.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1221" y="542.9531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1221" y="580.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="67" x="1248.5" y="560.9482">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="1236" y="577.2451">DPS Gateway</text><!--entity PKI Service--><rect fill="#FFFFFF" filter="url(#f11fo1zgmqbze1)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="323.5" y="111.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="318.5" y="116.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="318.5" y="154.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="67" x="337.5" y="134.4482">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="333.5" y="150.7451">PKI Service</text><!--entity IoTHub Gateway--><rect fill="#FFFFFF" filter="url(#f11fo1zgmqbze1)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="689" y="111.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="684" y="116.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="684" y="154.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="67" x="721.5" y="134.4482">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="699" y="150.7451">IoTHub Gateway</text><!--entity IS API Server--><rect fill="#00FFFF" filter="url(#f11fo1zgmqbze1)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="920.5" y="751.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="915.5" y="756.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="915.5" y="794.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="931" y="774.9482">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="930.5" y="791.2451">IS API Server</text><!--entity TPMS API Server--><rect fill="#00FFFF" filter="url(#f11fo1zgmqbze1)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="1038" y="965.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1033" y="970.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1033" y="1008.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="1062" y="988.9482">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="1048" y="1005.2451">TPMS API Server</text><!--entity KS API Server--><rect fill="#00FFFF" filter="url(#f11fo1zgmqbze1)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="773.5" y="965.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="768.5" y="970.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="768.5" y="1008.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="787" y="988.9482">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="783.5" y="1005.2451">KS API Server</text><!--entity CS API Server--><rect fill="#00FFFF" filter="url(#f11fo1zgmqbze1)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="362" y="965.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="357" y="970.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="357" y="1008.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="376" y="988.9482">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="372" y="1005.2451">CS API Server</text><!--entity IS MR Client--><rect fill="#00FFFF" filter="url(#f11fo1zgmqbze1)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="119" y="751.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="114" y="756.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="114" y="794.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="129" y="774.9482">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="130.5" y="791.2451">IS MR Client</text><!--entity CS MR Client--><rect fill="#00FFFF" filter="url(#f11fo1zgmqbze1)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="258" y="751.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="253" y="756.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="253" y="794.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="270" y="774.9482">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="268" y="791.2451">CS MR Client</text><!--entity KS MR Client--><rect fill="#00FFFF" filter="url(#f11fo1zgmqbze1)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="401.5" y="751.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="396.5" y="756.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="396.5" y="794.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="413" y="774.9482">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="411.5" y="791.2451">KS MR Client</text><!--entity MR API Server--><rect fill="#FFFFFF" filter="url(#f11fo1zgmqbze1)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="275.5" y="546.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="270.5" y="551.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="270.5" y="572.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="285.5" y="569.4482">MR API Server</text><!--entity EA Runtime--><rect fill="#FFFFFF" filter="url(#f11fo1zgmqbze1)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="585" y="306.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="580" y="311.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="580" y="332.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="595" y="329.4482">EA Runtime</text><!--entity MR EA Client--><rect fill="#FFFFFF" filter="url(#f11fo1zgmqbze1)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="442.5" y="306.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="437.5" y="311.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="437.5" y="332.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="452.5" y="329.4482">MR EA Client</text><!--entity IS HLM Client--><rect fill="#00FFFF" filter="url(#f11fo1zgmqbze1)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="941" y="537.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="936" y="542.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="936" y="580.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="953" y="560.9482">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="951" y="577.2451">IS HLM Client</text><!--entity KS HLM Client--><rect fill="#00FFFF" filter="url(#f11fo1zgmqbze1)" height="52.5938" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="792" y="537.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="787" y="542.9531"/><rect fill="#00FFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="787" y="580.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="807" y="560.9482">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="802" y="577.2451">KS HLM Client</text><!--entity IoTHub HLM Client--><rect fill="#FFFFFF" filter="url(#f11fo1zgmqbze1)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="611.5" y="546.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="606.5" y="551.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="606.5" y="572.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="621.5" y="569.4482">IoTHub HLM Client</text><!--entity MR EH Client--><rect fill="#FFFFFF" filter="url(#f11fo1zgmqbze1)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="279" y="306.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="274" y="311.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="274" y="332.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="289" y="329.4482">MR EH Client</text><!--entity IoTHub EH Client--><rect fill="#FFFFFF" filter="url(#f11fo1zgmqbze1)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="108.5" y="306.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="103.5" y="311.4531"/><rect fill="#FFFFFF" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="103.5" y="332.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="118.5" y="329.4482">IoTHub EH Client</text><!--entity Operator--><ellipse cx="1173" cy="106.4531" fill="#FEFECE" filter="url(#f11fo1zgmqbze1)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1173,114.4531 L1173,141.4531 M1160,122.4531 L1186,122.4531 M1173,141.4531 L1160,156.4531 M1173,141.4531 L1186,156.4531 " fill="none" filter="url(#f11fo1zgmqbze1)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="1142.5" y="176.4482">Operator</text><!--entity HSM--><path d="M1078.5,1107.9531 C1078.5,1097.9531 1104,1097.9531 1104,1097.9531 C1104,1097.9531 1129.5,1097.9531 1129.5,1107.9531 L1129.5,1133.25 C1129.5,1143.25 1104,1143.25 1104,1143.25 C1104,1143.25 1078.5,1143.25 1078.5,1133.25 L1078.5,1107.9531 " fill="#FEFECE" filter="url(#f11fo1zgmqbze1)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1078.5,1107.9531 C1078.5,1117.9531 1104,1117.9531 1104,1117.9531 C1104,1117.9531 1129.5,1117.9531 1129.5,1107.9531 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="1088.5" y="1134.9482">HSM</text><!--entity KS_Config--><path d="M883.5,1107.9531 C883.5,1097.9531 928,1097.9531 928,1097.9531 C928,1097.9531 972.5,1097.9531 972.5,1107.9531 L972.5,1133.25 C972.5,1143.25 928,1143.25 928,1143.25 C928,1143.25 883.5,1143.25 883.5,1133.25 L883.5,1107.9531 " fill="#FEFECE" filter="url(#f11fo1zgmqbze1)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M883.5,1107.9531 C883.5,1117.9531 928,1117.9531 928,1117.9531 C928,1117.9531 972.5,1117.9531 972.5,1107.9531 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="893.5" y="1134.9482">KS_Config</text><!--entity CS_Config--><path d="M497,1107.9531 C497,1097.9531 542,1097.9531 542,1097.9531 C542,1097.9531 587,1097.9531 587,1107.9531 L587,1133.25 C587,1143.25 542,1143.25 542,1143.25 C542,1143.25 497,1143.25 497,1133.25 L497,1107.9531 " fill="#FEFECE" filter="url(#f11fo1zgmqbze1)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M497,1107.9531 C497,1117.9531 542,1117.9531 542,1117.9531 C542,1117.9531 587,1117.9531 587,1107.9531 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="507" y="1134.9482">CS_Config</text><!--entity IS_Config--><path d="M919.5,979.9531 C919.5,969.9531 961,969.9531 961,969.9531 C961,969.9531 1002.5,969.9531 1002.5,979.9531 L1002.5,1005.25 C1002.5,1015.25 961,1015.25 961,1015.25 C961,1015.25 919.5,1015.25 919.5,1005.25 L919.5,979.9531 " fill="#FEFECE" filter="url(#f11fo1zgmqbze1)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M919.5,979.9531 C919.5,989.9531 961,989.9531 961,989.9531 C961,989.9531 1002.5,989.9531 1002.5,979.9531 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="929.5" y="1006.9482">IS_Config</text><!--link Operator to DPS Gateway--><path d="M1188.98,179.6731 C1192.52,189.3531 1196.07,199.7031 1199,209.4531 C1234.42,327.3531 1264.04,471.0531 1276.14,532.8331 " fill="none" id="Operator-DPS Gateway" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1277.12,537.8431,1279.3204,528.2432,1276.1614,532.9359,1271.4688,529.7769,1277.12,537.8431" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Operator to IoTHub Gateway--><path d="M1142.42,137.9531 C1036.99,137.9531 931.57,137.9531 826.15,137.9531 " fill="none" id="Operator-IoTHub Gateway" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="821.13,137.9531,830.13,141.9531,826.13,137.9531,830.13,133.9531,821.13,137.9531" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Operator to PKI Service--><path d="M1142.45,123.3731 C1066.52,88.9031 862.92,7.2231 690.5,34.4531 C593.39,49.7931 485.61,89.8231 423.33,115.3631 " fill="none" id="Operator-PKI Service" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="418.56,117.3331,428.4058,117.5791,423.1783,115.4172,425.3402,110.1897,418.56,117.3331" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Operator to HSM--><path d="M1203.65,143.6231 C1278.03,156.8531 1462,201.8731 1462,323.4531 C1462,323.4531 1462,323.4531 1462,993.4531 C1462,1062.5831 1221.51,1103.0331 1134.75,1115.3831 " fill="none" id="Operator-HSM" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1129.75,1116.0831,1139.2209,1118.7854,1134.7009,1115.384,1138.1023,1110.864,1129.75,1116.0831" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="1463" y="636.02">HSM tools</text><!--link Operator to KS_Config--><path d="M1176.49,179.7031 C1183.43,262.9231 1198.74,458.4231 1204,622.9531 C1209.97,809.6931 1225.42,860.3231 1186,1042.9531 C1183.48,1054.6531 1185.17,1060.2631 1176,1067.9531 C1160.93,1080.5831 1045.88,1100.7031 977.9,1111.6831 " fill="none" id="Operator-KS_Config" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="972.69,1112.5231,982.2135,1115.0338,977.6258,1111.7243,980.9353,1107.1366,972.69,1112.5231" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Operator to CS_Config--><path d="M1142.11,170.8431 C1090.48,221.9131 981.04,320.9031 867,366.4531 C810.46,389.0431 637.02,355.3931 595,399.4531 C498.25,500.8831 530.11,974.7231 539.69,1092.7631 " fill="none" id="Operator-CS_Config" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="540.11,1097.7931,543.351,1088.4928,539.696,1092.8103,535.3785,1089.1553,540.11,1097.7931" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Operator to IS_Config--><path d="M1203.77,148.7531 C1263.86,170.0331 1391,226.5231 1391,323.4531 C1391,323.4531 1391,323.4531 1391,779.4531 C1391,947.5031 1153.17,756.9031 1022,861.9531 C989.54,887.9431 973.46,935.2831 966.2,964.9531 " fill="none" id="Operator-IS_Config" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="965.03,969.9231,971.0068,962.0951,966.1887,965.0592,963.2246,960.2411,965.03,969.9231" style="stroke: #A80036; stroke-width: 1.0;"/><!--link IS MR Client to IS API Server--><path d="M178.18,751.8431 C187.46,723.3431 206.65,679.5531 241,659.9531 C300.64,625.9131 795.82,633.0631 859,659.9531 C900.56,677.6431 934.29,718.7331 954,747.5331 " fill="none" id="IS MR Client-IS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="956.8,751.6931,955.0974,741.9926,954.01,747.5439,948.4587,746.4565,956.8,751.6931" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="439" y="636.02">IPC</text><!--link CS MR Client to CS API Server--><path d="M324.79,805.0231 C344.4,844.2631 381.85,919.1631 402.82,961.0931 " fill="none" id="CS MR Client-CS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="405.17,965.7931,404.7102,955.955,402.9282,961.3238,397.5594,959.5418,405.17,965.7931" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="347" y="850.02">IPC</text><!--link KS MR Client to KS API Server--><path d="M500.11,805.0231 C570.45,844.8931 705.77,921.6031 778.99,963.1031 " fill="none" id="KS MR Client-KS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="783.73,965.7931,777.8863,957.8653,779.3844,963.3201,773.9295,964.8182,783.73,965.7931" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="576" y="850.02">IPC</text><!--link IS HLM Client to IS API Server--><path d="M992.35,591.0231 C988.29,630.1031 980.57,704.5531 976.2,746.5831 " fill="none" id="IS HLM Client-IS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="975.66,751.7931,980.5649,743.2525,976.1745,746.8197,972.6073,742.4293,975.66,751.7931" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="989" y="636.02">IPC</text><!--link KS HLM Client to KS API Server--><path d="M847.79,591.1431 C844.31,665.4231 834.22,880.2731 830.45,960.6331 " fill="none" id="KS HLM Client-KS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="830.21,965.7331,834.6419,956.9378,830.4526,960.739,826.6513,956.5497,830.21,965.7331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="845" y="783.02">IPC</text><!--link MR EH Client to MR API Server--><path d="M333,342.5731 C333,384.7531 333,493.6931 333,540.9831 " fill="none" id="MR EH Client-MR API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="333,546.1731,337,537.1731,333,541.1731,329,537.1731,333,546.1731" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="334" y="387.52">IPC</text><!--link MR EA Client to MR API Server--><path d="M484.28,342.5731 C455.21,385.0031 379.87,495.0231 347.8,541.8431 " fill="none" id="MR EA Client-MR API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="344.84,546.1731,353.2349,541.0229,347.6726,542.0529,346.6426,536.4906,344.84,546.1731" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="461" y="387.52">IPC</text><!--link MR API Server to IS MR Client--><path d="M309.78,582.5631 C289.84,598.0631 261.19,622.3431 241,647.9531 C216.54,678.9731 196.1,719.7431 183.74,747.1731 " fill="none" id="MR API Server-IS MR Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="181.68,751.8031,189.0039,745.2182,183.72,747.2382,181.7,741.9543,181.68,751.8031" style="stroke: #A80036; stroke-width: 1.0;"/><!--link MR API Server to CS MR Client--><path d="M331.28,582.8031 C327.73,618.7031 319.52,701.5431 315.04,746.7131 " fill="none" id="MR API Server-CS MR Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="314.54,751.7631,319.3962,743.1947,315.0262,746.7868,311.4341,742.4168,314.54,751.7631" style="stroke: #A80036; stroke-width: 1.0;"/><!--link MR API Server to KS MR Client--><path d="M344.01,582.6731 C354.52,599.2531 370.69,625.1131 384,647.9531 C403.65,681.6731 425.03,721.0631 439.14,747.4731 " fill="none" id="MR API Server-KS MR Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="441.51,751.9231,440.8239,742.0982,439.166,747.5066,433.7575,745.8486,441.51,751.9231" style="stroke: #A80036; stroke-width: 1.0;"/><!--link IS API Server to CS API Server--><path d="M920.35,803.5431 C901.2,811.9731 879.27,821.2631 859,828.9531 C814.85,845.7131 802.52,846.2131 758,861.9531 C659.72,896.7031 546.85,940.4731 479.05,967.1831 " fill="none" id="IS API Server-CS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="474.24,969.0831,484.0804,969.491,478.8892,967.2434,481.1368,962.0522,474.24,969.0831" style="stroke: #A80036; stroke-width: 1.0;"/><!--link IS API Server to TPMS API Server--><path d="M988.8,805.0231 C1013.1,844.3431 1059.52,919.4631 1085.4,961.3431 " fill="none" id="IS API Server-TPMS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1088.14,965.7931,1086.8005,956.0358,1085.5067,961.5427,1079.9998,960.249,1088.14,965.7931" style="stroke: #A80036; stroke-width: 1.0;"/><!--link KS API Server to HSM--><path d="M863.25,1019.0931 C875.15,1027.3431 888.82,1036.1131 902,1042.9531 C959.97,1073.0531 1032.57,1097.6131 1073.05,1110.2331 " fill="none" id="KS API Server-HSM" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1078.31,1111.8531,1070.9006,1105.3646,1073.5348,1110.3707,1068.5287,1113.0049,1078.31,1111.8531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="956" y="1064.02">aziot-keys</text><!--link TPMS API Server to HSM--><path d="M1104,1019.2531 C1104,1040.7131 1104,1071.1531 1104,1092.8431 " fill="none" id="TPMS API Server-HSM" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1104,1097.8731,1108,1088.8731,1104,1092.8731,1100,1088.8731,1104,1097.8731" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="1105" y="1064.02">aziot-tpm</text><!--link IS API Server to IS_Config--><path d="M971.55,805.0231 C969.26,845.4731 964.83,923.8231 962.5,964.8831 " fill="none" id="IS API Server-IS_Config" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="962.22,969.9431,966.7269,961.186,962.5052,964.9513,958.74,960.7296,962.22,969.9431" style="stroke: #A80036; stroke-width: 1.0;"/><!--link CS API Server to CS_Config--><path d="M443.39,1019.2531 C464.96,1041.1731 495.74,1072.4431 517.15,1094.2031 " fill="none" id="CS API Server-CS_Config" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="520.77,1097.8731,517.3087,1088.6525,517.2631,1094.3092,511.6064,1094.2636,520.77,1097.8731" style="stroke: #A80036; stroke-width: 1.0;"/><!--link KS API Server to KS_Config--><path d="M849.27,1019.2531 C866.42,1041.0831 890.86,1072.1831 907.95,1093.9331 " fill="none" id="KS API Server-KS_Config" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="911.05,1097.8731,908.6364,1088.3246,907.9615,1093.941,902.3451,1093.2661,911.05,1097.8731" style="stroke: #A80036; stroke-width: 1.0;"/><!--link IoTHub Gateway to IS API Server--><path d="M812.67,167.0931 C887.04,207.0131 1013,287.8431 1065,399.4531 C1105.45,486.2731 1089.4,522.3331 1065,614.9531 C1051.13,667.6231 1015.84,721.1431 993.22,751.7231 " fill="none" id="IoTHub Gateway-IS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="807.84,164.5231,813.8949,172.2909,812.2506,166.8783,817.6632,165.234,807.84,164.5231" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="1060" y="387.52">HTTPS</text><!--link IS API Server to KS API Server--><path d="M948.59,805.1231 C934.2,820.8831 916.11,841.8431 902,861.9531 C879.29,894.3031 857.63,934.2931 843.89,961.2031 " fill="none" id="IS API Server-KS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="841.58,965.7331,849.2304,959.5306,843.8503,961.2783,842.1026,955.8981,841.58,965.7331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="921" y="850.02">IPC</text><!--link PKI Service to CS API Server--><path d="M318.26,141.8431 C217.16,150.5231 6,185.2031 6,323.4531 C6,323.4531 6,323.4531 6,779.4531 C6,937.5231 248.74,977.8331 361.58,988.0331 " fill="none" id="PKI Service-CS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="323.28,141.4231,313.9797,138.1821,318.2972,141.8372,314.6421,146.1547,323.28,141.4231" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="7" y="569.02">HTTPS (EST)</text><!--link IoTHub Gateway to IoTHub EH Client--><path d="M683.57,150.3431 C555.95,171.0531 298.66,214.5731 262,234.4531 C231.85,250.8031 205.86,281.3731 190.56,302.0731 " fill="none" id="IoTHub Gateway-IoTHub EH Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="187.47,306.3231,196.0006,301.4008,190.4126,302.2807,189.5326,296.6927,187.47,306.3231" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="688.8,149.4931,679.2754,146.9868,683.8646,150.2942,680.5572,154.8834,688.8,149.4931" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="354" y="222.52">AMQP (EH Module)</text><!--link IoTHub Gateway to IoTHub HLM Client--><path d="M749.83,169.8431 C736.22,251.2331 699.6,470.1731 687.75,541.0031 " fill="none" id="IoTHub Gateway-IoTHub HLM Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="686.88,546.2331,692.3167,538.0208,687.7089,541.3023,684.4275,536.6945,686.88,546.2331" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="750.72,164.5531,745.2833,172.7654,749.8911,169.4839,753.1725,174.0917,750.72,164.5531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="739" y="329.02">AMQP (HL Module)</text><!--link DPS Gateway to IS API Server--><path d="M1240.46,593.9531 C1179.95,635.4631 1068.49,711.9431 1010.4,751.7931 " fill="none" id="DPS Gateway-IS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1244.73,591.0231,1235.0475,592.8257,1240.6098,593.8558,1239.5797,599.4181,1244.73,591.0231" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="1191" y="636.02">HTTPS</text><!--link IoTHub Gateway to EA Runtime--><path d="M721.59,168.3531 C709.35,180.2731 696.04,194.7031 686,209.4531 C664.53,241.0031 648.47,283.0531 640.54,306.2531 " fill="none" id="IoTHub Gateway-EA Runtime" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="725.35,164.7331,716.0949,168.101,721.7508,168.2038,721.6479,173.8597,725.35,164.7331" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="687" y="222.52">HTTPS</text><!--
@startuml
title Data Flow - new architecture

actor Operator
cloud "DPS Service" {
    [DPS Gateway] <<service>>
}

cloud "PKI" {
    [PKI Service] <<service>>
}

cloud "IoT Hub Service" {
    [IoTHub Gateway] <<service>>
}

node "Identity Service" <<new>> {
    [IS API Server] <<newclient>>
}

node "TPM Service" <<new>> {
    [TPMS API Server] <<newclient>>
}

node "Key Service" <<new>> {
    [KS API Server] <<newclient>>
    [KS API Server] <<newclient>>
}

node "Certificate Service" <<new>> {
    [CS API Server] <<newclient>>
}

node "Edge Module Runtime" <<modified>> {
    folder "MR Legacy Service" {
        [MR API Server]
    }
    [IS MR Client] <<newclient>>
    [CS MR Client] <<newclient>>
    [KS MR Client] <<newclient>>
}
node "Edge Agent" {
    [EA Runtime]
    [MR EA Client]
}
node "Host-level module" {
    [IS HLM Client] <<newclient>>
    [KS HLM Client] <<newclient>>
    [IoTHub HLM Client]
}
node "Edge Hub" {
    [MR EH Client]
    [IoTHub EH Client]
}

database "HSM"
database "KS_Config"
database "CS_Config"
database "IS_Config"


Operator -right-> [DPS Gateway]
Operator -right-> [IoTHub Gateway]
Operator -right-> [PKI Service]
Operator -right-> HSM: HSM tools
Operator -right-> KS_Config
Operator -right-> CS_Config
Operator -right-> IS_Config

[IS MR Client] -down-> [IS API Server] : IPC
[CS MR Client] -down-> [CS API Server] : IPC
[KS MR Client] -down-> [KS API Server] : IPC
[IS HLM Client] -down-> [IS API Server] : IPC
[KS HLM Client] -down-> [KS API Server] : IPC
[MR EH Client] - -> [MR API Server] : IPC
[MR EA Client] - -> [MR API Server] : IPC

[MR API Server] -down-> [IS MR Client]
[MR API Server] -down-> [CS MR Client]
[MR API Server] -down-> [KS MR Client]
[IS API Server] -down-> [CS API Server]
[IS API Server] -down-> [TPMS API Server]
[KS API Server] -down-> HSM : aziot-keys
[TPMS API Server] -down-> HSM : aziot-tpm
[IS API Server] - -> IS_Config
[CS API Server] - -> CS_Config
[KS API Server] - -> KS_Config

[IS API Server] -up-> [IoTHub Gateway] : HTTPS
[IS API Server] -down-> [KS API Server] : IPC
[CS API Server] -up-> [PKI Service] : HTTPS (EST)

[IoTHub EH Client] <-up-> [IoTHub Gateway] : AMQP (EH Module)
[IoTHub HLM Client] <-up-> [IoTHub Gateway] : AMQP (HL Module)
[IS API Server] -up-> [DPS Gateway] : HTTPS

[EA Runtime] -up-> [IoTHub Gateway] : HTTPS

skinparam node {
	backgroundColor<<new>> Magenta
	backgroundColor<<modified>> Yellow
}

skinparam component {
    backgroundColor White
    backgroundColor<<newclient>> Cyan
    backgroundColor<<modified>> Yellow
    backgroundColor<<service>> White
}

@enduml

PlantUML version 1.2018.13(Mon Nov 26 12:11:51 EST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.8+10-post-Ubuntu-0ubuntu120.04
Operating System: Linux
OS Version: 5.4.0-7642-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>