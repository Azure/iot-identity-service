<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1333px" preserveAspectRatio="none" style="width:1537px;height:1333px;" version="1.1" viewBox="0 0 1537 1333" width="1537px" zoomAndPan="magnify"><defs><filter height="300%" id="f1g1cejif7hzz5" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="231" x="644" y="16.6992">Data Flow - new architecture</text><!--MD5=[4034dc877b8eccbaf2b7bb77a2a7acd3]
cluster DPS Service--><path d="M1202.6379,658.1076 C1205.1497,651.5377 1209.5881,651.5824 1214.4293,655.4847 C1217.6309,646.897 1223.026,647.4124 1228.741,652.9356 C1230.9265,645.4043 1236.5431,644.9826 1241.4255,650.2662 C1244.8216,643.2733 1250.7854,644.6137 1254.2515,650.1949 C1256.3799,643.4426 1261.7217,642.0445 1267.126,646.3968 C1272.9959,640.4703 1278.7244,642.3102 1280.9804,650.0582 C1285.3998,644.8944 1290.0742,644.7969 1293.0436,651.5286 C1297.8451,646.1849 1302.973,646.149 1306.1609,653.232 C1310.7597,647.5753 1314.9317,648.0609 1318.1968,654.5532 C1328.3494,647.5648 1335.8631,650.9282 1338,662.9175 C1338.1266,662.8987 1338.1714,663.0016 1338.1267,663.101 C1346.2933,665.9596 1346.9228,671.706 1341.3157,677.5952 C1348.3447,680.3083 1348.825,684.8094 1344.0528,690.1046 C1350.2769,693.7562 1350.0555,697.8895 1344.5639,702.0427 C1351.1766,705.1617 1351.8161,709.3878 1347.3,714.879 C1353.3853,720.3739 1351.8064,725.7516 1344.5078,728.5036 C1349.6722,733.6774 1349.42,738.5838 1342.5588,742.0241 C1347.1354,745.8819 1345.979,751.3689 1340.2749,753.1083 C1346.2758,764.2087 1342.4801,770.002 1331,772.9175 C1331.6872,772.3061 1332.5747,772.3999 1332.7048,773.4792 C1330.3918,781.0074 1325.3826,782.1661 1320.0088,776.403 C1317.5027,784.2183 1310.2351,785.509 1305.3925,778.7454 C1302.2633,784.0649 1298.8112,785.1208 1294.1297,780.5051 C1289.318,787.2313 1284.1664,787.9857 1279.187,780.6838 C1276.1636,787.1569 1272.4462,787.2983 1267.792,782.3044 C1262.7695,787.4739 1257.8275,788.2727 1254.0788,780.9104 C1248.4547,787.6115 1243.4708,785.2459 1240.1335,778.533 C1236.3301,783.7021 1230.453,783.9601 1227.9358,777.216 C1223.2751,784.2493 1218.9225,784.1015 1214.6393,776.8642 C1204.1492,782.5654 1193.8633,780.2526 1194,765.9175 C1194.7951,766.1628 1194.9985,766.6926 1194.5131,767.3855 C1187.8514,763.0898 1187.9466,758.8806 1193.5863,753.7487 C1187.8971,751.0803 1187.2418,744.6326 1192.1568,740.7941 C1185.9594,737.8199 1184.9115,732.6213 1190.5219,728.1235 C1183.9866,725.1032 1184.2466,719.215 1189.6421,715.3716 C1185.1371,710.6213 1185.8957,706.3159 1191.9941,703.7029 C1185.402,699.7919 1185.7018,693.2634 1192.6907,690.0451 C1186.9503,686.3433 1187.0406,680.4918 1192.8949,676.9711 C1183.8831,667.0334 1189.2098,657.847 1201,655.9175 C1202.5527,655.7388 1203.1603,656.7344 1202.6379,658.1076 " fill="#FFFFFF" filter="url(#f1g1cejif7hzz5)" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="1225.5" y="673.9058">DPS Service</text><!--MD5=[9cc3614b0e94473f1fa5351936eadb26]
cluster PKI--><path d="M1109.08,881.5935 C1110.7046,876.5819 1114.972,875.3478 1118.6626,879.4122 C1121.1316,872.4927 1127.2087,872.6592 1131.2436,877.7753 C1133.314,871.5534 1138.5429,871.7889 1142.1771,876.1616 C1144.3431,869.4243 1148.2913,869.4089 1153.4732,872.7972 C1155.9037,867.9578 1159.8431,866.3913 1164.0016,870.8381 C1168.8014,866.0611 1173.5105,867.3587 1175.676,873.6234 C1179.4579,869.4555 1183.0669,869.4286 1186.2714,874.3002 C1189.9302,870.1818 1194.6867,871.0906 1196.763,876.116 C1202.0851,871.0273 1206.9166,873.5531 1208.6156,879.8783 C1217.2457,872.805 1224.085,877.4069 1226,886.9175 C1226.8643,887.3159 1227.0505,887.8309 1226.3377,888.5547 C1233.0006,892.0819 1234.3252,895.9455 1228.7539,901.7182 C1234.1884,905.1752 1235.2846,910.7588 1229.4417,914.8083 C1235.7817,918.1594 1235.6658,923.2256 1229.7728,926.9113 C1236.2509,931.0354 1236.4914,935.6774 1230.523,940.4892 C1235.1226,944.8371 1234.9818,949.6169 1229.2444,952.8999 C1233.7534,956.4512 1233.9401,962.1221 1228.0288,964.5899 C1234.1567,968.7799 1233.9714,974.5853 1227.9775,978.7313 C1234.2349,987.6835 1229.2468,996.1124 1219,996.9175 C1219.2446,996.6414 1219.5628,996.7309 1219.6503,997.0807 C1217.1843,1003.4705 1212.9168,1004.3894 1207.8269,999.9438 C1204.6217,1004.4821 1201.4858,1004.4306 1198.0274,1000.2275 C1195.3388,1006.8185 1189.5331,1007.0721 1185.7002,1001.3755 C1182.6464,1006.0323 1179.058,1005.5295 1176.2164,1001.1528 C1173.3679,1007.9442 1167.2305,1008.022 1163.1942,1002.3988 C1159.5128,1007.0073 1154.8321,1006.9239 1152.2368,1001.2423 C1149.2767,1007.156 1144.6442,1006.0122 1141.3212,1001.627 C1137.1019,1005.3485 1133.3874,1005.2666 1131.0426,999.5793 C1127.0126,1004.7406 1121.28,1005.2846 1118.5288,998.2656 C1108.5023,1004.0094 1102.1714,1001.6083 1100,989.9175 C1101.2493,989.8121 1102.0807,990.26 1101.6815,991.7051 C1093.293,988.8281 1092.984,982.3191 1099.4428,977.1572 C1092.4535,975.6843 1091.8055,969.9552 1096.4312,965.4854 C1089.3752,962.4193 1089.6734,957.8354 1094.9781,953.2958 C1087.9192,950.5491 1087.0255,944.8876 1092.7452,939.9956 C1086.6349,935.7291 1088.8107,929.8356 1094.493,927.177 C1087.8888,921.4944 1090.2546,916.6588 1096.7449,913.0657 C1090.6902,908.3789 1090.5558,903.0544 1098.1714,899.8424 C1091.7753,889.3876 1095.4059,882.4009 1107,879.9175 C1108.3838,879.5227 1109.2534,880.0558 1109.08,881.5935 " fill="#FFFFFF" filter="url(#f1g1cejif7hzz5)" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="1152" y="897.9058">PKI</text><!--MD5=[4b6597e5202bb255e27abc7ed2ac90aa]
cluster IoT Hub Service--><path d="M849.1092,42.5684 C853.5975,35.724 857.578,36.5662 862.1618,42.4706 C864.2143,35.3744 869.2747,35.2815 873.8054,40.0357 C875.894,32.7639 882.0307,32.9895 886.2174,37.8976 C890.227,30.8077 894.7228,30.4349 899.6917,36.9474 C902.857,30.5112 906.3894,29.9178 911.3912,35.0976 C913.1982,28.5963 918.7449,27.2701 923.1507,32.4903 C927.9876,27.0938 932.6898,27.9861 936.2542,33.9571 C941.4719,29.217 945.9234,31.4039 948.1377,37.3097 C951.4777,31.7794 957.858,30.3761 961.0122,37.4987 C965.6397,32.1033 971.1496,33.241 973.7377,39.6898 C978.0765,35.2898 981.8785,35.3696 985.075,40.9831 C994.0404,34.7243 1001.9953,38.574 1004,48.9175 C1004.4819,48.6373 1004.7216,48.9081 1004.782,49.3648 C1010.8953,51.7702 1013.1311,56.6771 1007.7338,61.8121 C1014.1574,66.1961 1013.8817,71.2013 1008.1856,75.972 C1014.7013,78.7533 1015.9645,83.3407 1010.516,88.3708 C1016.671,91.1267 1017.1677,97.3325 1012.1733,101.4962 C1017.0653,105.9167 1017.257,110.9799 1010.2016,113.4257 C1017.0317,117.8487 1015.5213,123.581 1008.8299,126.5958 C1014.2472,131.1168 1013.9802,136.3222 1007.4513,139.5743 C1014.6134,150.8333 1007.9314,157.4347 997,158.9175 C997.7087,158.3721 998.1568,158.5848 998.3017,159.441 C995.9965,165.9349 992.182,167.7691 986.8052,162.4236 C982.5567,169.2491 977.5374,169.05 973.4083,162.3056 C970.4618,167.7635 967.0158,169.069 961.9448,164.8126 C958.2183,171.5043 954.2942,171.2185 949.197,166.3203 C946.1609,172.4759 942.4264,173.0994 937.0487,169.1297 C934.7381,175.6692 928.9079,176.3539 925.166,170.5023 C919.9093,175.6678 914.4252,176.7596 910.9547,168.5977 C905.9242,173.2564 902.2624,172.6469 898.9655,166.6475 C894.3642,171.6829 889.5946,169.9929 887.8451,163.8184 C883.5153,169.3363 879.5483,169.4138 875.3149,163.7107 C869.5377,170.051 865.0414,168.0304 861.732,161.1711 C851.3993,168.071 843.8454,163.1158 842,151.9175 C842.5015,151.6098 843.0592,151.7849 843.1076,152.4392 C836.7536,149.281 835.5921,145.1742 840.8953,139.9509 C834.779,135.8597 833.8474,131.7729 839.5152,126.4748 C832.2536,124.6133 832.1497,118.4457 837.1769,114.2363 C830.5524,112.209 829.6042,106.8032 834.7704,102.3822 C829.7576,97.8274 829.5193,92.4313 836.5211,89.5104 C831.2282,84.4498 833.4614,77.8946 839.8856,75.6856 C834.2892,70.4755 834.3045,65.7528 841.6301,62.2163 C833.7664,52.7235 838.2621,44.6567 849,41.9175 C849.3103,42.0602 849.3383,42.3352 849.1092,42.5684 " fill="#FFFFFF" filter="url(#f1g1cejif7hzz5)" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="870.5" y="59.9058">IoT Hub Service</text><!--MD5=[7794c020febe37fee2610325f7805d30]
cluster Identity Service--><polygon fill="#FF00FF" filter="url(#f1g1cejif7hzz5)" points="887,839.9175,897,829.9175,1068,829.9175,1068,994.9175,1058,1004.9175,887,1004.9175,887,839.9175" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1058" x2="1068" y1="839.9175" y2="829.9175"/><line style="stroke: #000000; stroke-width: 1.5;" x1="887" x2="1058" y1="839.9175" y2="839.9175"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1058" x2="1058" y1="839.9175" y2="1004.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="37" x="955" y="855.9058">«new»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="921" y="872.3121">Identity Service</text><!--MD5=[9e5069793647d3bf2dd98c06c7283a6f]
cluster Key Service--><polygon fill="#FF00FF" filter="url(#f1g1cejif7hzz5)" points="705,839.9175,715,829.9175,863,829.9175,863,994.9175,853,1004.9175,705,1004.9175,705,839.9175" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="853" x2="863" y1="839.9175" y2="829.9175"/><line style="stroke: #000000; stroke-width: 1.5;" x1="705" x2="853" y1="839.9175" y2="839.9175"/><line style="stroke: #000000; stroke-width: 1.5;" x1="853" x2="853" y1="839.9175" y2="1004.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="37" x="761.5" y="855.9058">«new»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="741.5" y="872.3121">Key Service</text><!--MD5=[4e0ace6db1f04dc49a616f890a95ce58]
cluster Certificate Service--><polygon fill="#FF00FF" filter="url(#f1g1cejif7hzz5)" points="940,1063.9175,950,1053.9175,1143,1053.9175,1143,1218.9175,1133,1228.9175,940,1228.9175,940,1063.9175" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1133" x2="1143" y1="1063.9175" y2="1053.9175"/><line style="stroke: #000000; stroke-width: 1.5;" x1="940" x2="1133" y1="1063.9175" y2="1063.9175"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1133" x2="1133" y1="1063.9175" y2="1228.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="37" x="1019" y="1079.9058">«new»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="974" y="1096.3121">Certificate Service</text><!--MD5=[8ff2ff8eaa8b0e22a01544f4bdf4d05f]
cluster Edge Module Runtime--><polygon fill="#FFFF00" filter="url(#f1g1cejif7hzz5)" points="565,407.9175,575,397.9175,1027,397.9175,1027,770.9175,1017,780.9175,565,780.9175,565,407.9175" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1017" x2="1027" y1="407.9175" y2="397.9175"/><line style="stroke: #000000; stroke-width: 1.5;" x1="565" x2="1017" y1="407.9175" y2="407.9175"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1017" x2="1017" y1="407.9175" y2="780.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="66" x="759" y="423.9058">«modified»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="719.5" y="440.3121">Edge Module Runtime</text><!--MD5=[7cbe1a5fc3e046c9a58895a21185779e]
cluster MR Legacy Service--><polygon fill="#FFFF00" filter="url(#f1g1cejif7hzz5)" points="689,482.9175,820,482.9175,827,505.3238,851,505.3238,851,598.9175,689,598.9175,689,482.9175" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="689" x2="827" y1="505.3238" y2="505.3238"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="693" y="497.9058">MR Legacy Service</text><!--MD5=[9b13154502175b34a7dde17b32f1f8a1]
cluster Edge Agent--><polygon fill="#FFFFFF" filter="url(#f1g1cejif7hzz5)" points="693,232.9175,703,222.9175,997,222.9175,997,338.9175,987,348.9175,693,348.9175,693,232.9175" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="987" x2="997" y1="232.9175" y2="222.9175"/><line style="stroke: #000000; stroke-width: 1.5;" x1="693" x2="987" y1="232.9175" y2="232.9175"/><line style="stroke: #000000; stroke-width: 1.5;" x1="987" x2="987" y1="232.9175" y2="348.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="802.5" y="248.9058">Edge Agent</text><!--MD5=[7d68aa027216ad083fcdb57666e906fc]
cluster Host-level module--><polygon fill="#FFFFFF" filter="url(#f1g1cejif7hzz5)" points="16,871.9175,26,861.9175,528,861.9175,528,994.9175,518,1004.9175,16,1004.9175,16,871.9175" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="518" x2="528" y1="871.9175" y2="861.9175"/><line style="stroke: #000000; stroke-width: 1.5;" x1="16" x2="518" y1="871.9175" y2="871.9175"/><line style="stroke: #000000; stroke-width: 1.5;" x1="518" x2="518" y1="871.9175" y2="1004.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="123" x="206.5" y="887.9058">Host-level module</text><!--MD5=[b606e694e189a5e0bde06dd1b8d0f0e0]
cluster Edge Hub--><polygon fill="#FFFFFF" filter="url(#f1g1cejif7hzz5)" points="334,232.9175,344,222.9175,669,222.9175,669,338.9175,659,348.9175,334,348.9175,334,232.9175" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="659" x2="669" y1="232.9175" y2="222.9175"/><line style="stroke: #000000; stroke-width: 1.5;" x1="334" x2="659" y1="232.9175" y2="232.9175"/><line style="stroke: #000000; stroke-width: 1.5;" x1="659" x2="659" y1="232.9175" y2="348.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="466" y="248.9058">Edge Hub</text><!--MD5=[e8cfd881e0c7b95e10a1bb0d559cc9f2]
entity DPS Gateway--><rect fill="#FFFFFF" filter="url(#f1g1cejif7hzz5)" height="62.8125" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1202.5" y="701.9175"/><rect fill="#FFFFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="1309.5" y="706.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="1307.5" y="708.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="1307.5" y="712.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="55" x="1233.5" y="734.9058">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="1217.5" y="751.3121">DPS Gateway</text><!--MD5=[344739cc555d75ba553dad245e8ebc3e]
entity PKI Service--><rect fill="#FFFFFF" filter="url(#f1g1cejif7hzz5)" height="62.8125" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="1107.5" y="925.9175"/><rect fill="#FFFFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="1198.5" y="930.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="1196.5" y="932.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="1196.5" y="936.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="55" x="1130.5" y="958.9058">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="1122.5" y="975.3121">PKI Service</text><!--MD5=[90fbbf7b6c870618297b0507f9a7a4e4]
entity IoTHub Gateway--><rect fill="#FFFFFF" filter="url(#f1g1cejif7hzz5)" height="62.8125" style="stroke: #A80036; stroke-width: 1.5;" width="146" x="850" y="87.9175"/><rect fill="#FFFFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="976" y="92.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="974" y="94.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="974" y="98.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="55" x="890.5" y="120.9058">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="865" y="137.3121">IoTHub Gateway</text><!--MD5=[084e4c2da341887b8d9e91d65abc0526]
entity IS API Server--><rect fill="#00FFFF" filter="url(#f1g1cejif7hzz5)" height="62.8125" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="916.5" y="925.9175"/><rect fill="#00FFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="1017.5" y="930.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="1015.5" y="932.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="1015.5" y="936.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="69" x="937.5" y="958.9058">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="931.5" y="975.3121">IS API Server</text><!--MD5=[4815293e3103fd40b22d8b2760126ba0]
entity KS API Server--><rect fill="#00FFFF" filter="url(#f1g1cejif7hzz5)" height="62.8125" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="721" y="925.9175"/><rect fill="#00FFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="827" y="930.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="825" y="932.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="825" y="936.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="69" x="744.5" y="958.9058">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="736" y="975.3121">KS API Server</text><!--MD5=[e46db663c6807955aebb9f838b3ae64c]
entity CS API Server--><rect fill="#00FFFF" filter="url(#f1g1cejif7hzz5)" height="62.8125" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="987.5" y="1149.9175"/><rect fill="#00FFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="1094.5" y="1154.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="1092.5" y="1156.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="1092.5" y="1160.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="69" x="1011.5" y="1182.9058">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="1002.5" y="1199.3121">CS API Server</text><!--MD5=[3015580521d7a46dd6257113700ed852]
entity IS MR Client--><rect fill="#00FFFF" filter="url(#f1g1cejif7hzz5)" height="62.8125" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="895" y="701.9175"/><rect fill="#00FFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="991" y="706.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="989" y="708.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="989" y="712.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="69" x="913.5" y="734.9058">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="910" y="751.3121">IS MR Client</text><!--MD5=[ecef60f21877ac11267e02fd67475444]
entity CS MR Client--><rect fill="#00FFFF" filter="url(#f1g1cejif7hzz5)" height="62.8125" style="stroke: #A80036; stroke-width: 1.5;" width="122" x="581" y="701.9175"/><rect fill="#00FFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="683" y="706.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="681" y="708.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="681" y="712.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="69" x="602.5" y="734.9058">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="596" y="751.3121">CS MR Client</text><!--MD5=[6415928faf73ed48dc9621681c894071]
entity KS MR Client--><rect fill="#00FFFF" filter="url(#f1g1cejif7hzz5)" height="62.8125" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="738.5" y="701.9175"/><rect fill="#00FFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="839.5" y="706.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="837.5" y="708.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="837.5" y="712.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="69" x="759.5" y="734.9058">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="753.5" y="751.3121">KS MR Client</text><!--MD5=[3155f9bf23155fc869faccdedd826a7d]
entity MR API Server--><rect fill="#FFFFFF" filter="url(#f1g1cejif7hzz5)" height="46.4063" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="705" y="536.9175"/><rect fill="#FFFFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="815" y="541.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="813" y="543.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="813" y="547.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="720" y="569.9058">MR API Server</text><!--MD5=[5ba7c1ccec5022ed021ea15342905256]
entity EA Runtime--><rect fill="#FFFFFF" filter="url(#f1g1cejif7hzz5)" height="46.4063" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="865.5" y="286.9175"/><rect fill="#FFFFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="960.5" y="291.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="958.5" y="293.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="958.5" y="297.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="880.5" y="319.9058">EA Runtime</text><!--MD5=[5b83bafd7c74b83ec51e270621bf56a2]
entity MR EA Client--><rect fill="#FFFFFF" filter="url(#f1g1cejif7hzz5)" height="46.4063" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="709.5" y="286.9175"/><rect fill="#FFFFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="810.5" y="291.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="808.5" y="293.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="808.5" y="297.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="724.5" y="319.9058">MR EA Client</text><!--MD5=[756676c974634b40fab49708e7753de0]
entity IS HLM Client--><rect fill="#00FFFF" filter="url(#f1g1cejif7hzz5)" height="62.8125" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="388.5" y="925.9175"/><rect fill="#00FFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="491.5" y="930.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="489.5" y="932.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="489.5" y="936.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="69" x="410.5" y="958.9058">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="403.5" y="975.3121">IS HLM Client</text><!--MD5=[5f97b384e251fd0806a911156a614b7f]
entity KS HLM Client--><rect fill="#00FFFF" filter="url(#f1g1cejif7hzz5)" height="62.8125" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="225" y="925.9175"/><rect fill="#00FFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="333" y="930.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="331" y="932.9175"/><rect fill="#00FFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="331" y="936.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="69" x="249.5" y="958.9058">«newclient»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="240" y="975.3121">KS HLM Client</text><!--MD5=[c924f980343bd788827f783d5a7edfc1]
entity IoTHub HLM Client--><rect fill="#FFFFFF" filter="url(#f1g1cejif7hzz5)" height="46.4063" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="32.5" y="934.4175"/><rect fill="#FFFFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="169.5" y="939.4175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="167.5" y="941.4175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="167.5" y="945.4175"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="117" x="47.5" y="967.4058">IoTHub HLM Client</text><!--MD5=[aa4aa3311aae7e180c9897bde274b371]
entity MR EH Client--><rect fill="#FFFFFF" filter="url(#f1g1cejif7hzz5)" height="46.4063" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="531.5" y="286.9175"/><rect fill="#FFFFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="632.5" y="291.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="630.5" y="293.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="630.5" y="297.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="546.5" y="319.9058">MR EH Client</text><!--MD5=[59f73ad67132c429e47a2962912cd517]
entity IoTHub EH Client--><rect fill="#FFFFFF" filter="url(#f1g1cejif7hzz5)" height="46.4063" style="stroke: #A80036; stroke-width: 1.5;" width="146" x="350" y="286.9175"/><rect fill="#FFFFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="15" x="476" y="291.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="474" y="293.9175"/><rect fill="#FFFFFF" height="2" style="stroke: #A80036; stroke-width: 1.5;" width="4" x="474" y="297.9175"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="365" y="319.9058">IoTHub EH Client</text><!--MD5=[2571bb1592dc874a255a7701a0171bbf]
entity Operator--><ellipse cx="1266" cy="88.4175" fill="#FEFECE" filter="url(#f1g1cejif7hzz5)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M1266,96.4175 L1266,123.4175 M1253,104.4175 L1279,104.4175 M1266,123.4175 L1253,138.4175 M1266,123.4175 L1279,138.4175 " fill="none" filter="url(#f1g1cejif7hzz5)" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="1237" y="156.9058">Operator</text><!--MD5=[ff028a7ac4eed75d9278e76cd9053439]
entity HSM--><path d="M1170,1168.9175 C1170,1158.9175 1195,1158.9175 1195,1158.9175 C1195,1158.9175 1220,1158.9175 1220,1168.9175 L1220,1194.3238 C1220,1204.3238 1195,1204.3238 1195,1204.3238 C1195,1204.3238 1170,1204.3238 1170,1194.3238 L1170,1168.9175 " fill="#FEFECE" filter="url(#f1g1cejif7hzz5)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1170,1168.9175 C1170,1178.9175 1195,1178.9175 1195,1178.9175 C1195,1178.9175 1220,1178.9175 1220,1168.9175 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="1180" y="1195.9058">HSM</text><!--MD5=[11ecbcabae378fc48a88e79adafdb188]
entity KS_Config--><path d="M608.5,1168.9175 C608.5,1158.9175 652,1158.9175 652,1158.9175 C652,1158.9175 695.5,1158.9175 695.5,1168.9175 L695.5,1194.3238 C695.5,1204.3238 652,1204.3238 652,1204.3238 C652,1204.3238 608.5,1204.3238 608.5,1194.3238 L608.5,1168.9175 " fill="#FEFECE" filter="url(#f1g1cejif7hzz5)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M608.5,1168.9175 C608.5,1178.9175 652,1178.9175 652,1178.9175 C652,1178.9175 695.5,1178.9175 695.5,1168.9175 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="618.5" y="1195.9058">KS_Config</text><!--MD5=[2aa0c087703c6d91446931294913eabb]
entity CS_Config--><path d="M1250,1285.9175 C1250,1275.9175 1294,1275.9175 1294,1275.9175 C1294,1275.9175 1338,1275.9175 1338,1285.9175 L1338,1311.3238 C1338,1321.3238 1294,1321.3238 1294,1321.3238 C1294,1321.3238 1250,1321.3238 1250,1311.3238 L1250,1285.9175 " fill="#FEFECE" filter="url(#f1g1cejif7hzz5)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1250,1285.9175 C1250,1295.9175 1294,1295.9175 1294,1295.9175 C1294,1295.9175 1338,1295.9175 1338,1285.9175 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="1260" y="1312.9058">CS_Config</text><!--MD5=[2d8738bb92e9295d1373399849627c18]
entity IS_Config--><path d="M1326,1168.9175 C1326,1158.9175 1367,1158.9175 1367,1158.9175 C1367,1158.9175 1408,1158.9175 1408,1168.9175 L1408,1194.3238 C1408,1204.3238 1367,1204.3238 1367,1204.3238 C1367,1204.3238 1326,1204.3238 1326,1194.3238 L1326,1168.9175 " fill="#FEFECE" filter="url(#f1g1cejif7hzz5)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1326,1168.9175 C1326,1178.9175 1367,1178.9175 1367,1178.9175 C1367,1178.9175 1408,1178.9175 1408,1168.9175 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="1336" y="1195.9058">IS_Config</text><!--MD5=[8653b4459334fbbbf517633636e5f0f4]
link Operator to DPS Gateway--><path d="M1266,160.0975 C1266,272.1075 1266,589.4875 1266,696.5975 " fill="none" id="Operator-to-DPS Gateway" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1266,701.8475,1270,692.8475,1266,696.8475,1262,692.8475,1266,701.8475" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[65764519f9d838083717bf16dc95b484]
link Operator to IoTHub Gateway--><path d="M1237,119.4175 C1158.4,119.4175 1079.8,119.4175 1001.2,119.4175 " fill="none" id="Operator-to-IoTHub Gateway" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="996.02,119.4175,1005.02,123.4175,1001.02,119.4175,1005.02,115.4175,996.02,119.4175" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[d63ee6e7314cd6a0bff3b3c9dd1a6e38]
link Operator to PKI Service--><path d="M1258.5,160.2475 C1239.32,264.3875 1188.72,553.5375 1171,796.9175 C1167.9,839.4375 1165.64,888.4275 1164.33,920.7675 " fill="none" id="Operator-to-PKI Service" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1164.12,925.8175,1168.4775,916.9851,1164.3204,920.8216,1160.484,916.6645,1164.12,925.8175" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c750f082465d46bb52b42d8b8f3b4813]
link Operator to HSM--><path d="M1282.65,159.9675 C1286.2,169.6275 1289.59,180.0275 1292,189.9175 C1323.6,319.7775 1370.46,657.5275 1346,788.9175 C1319.17,933.0575 1241.2,1092.5275 1209.08,1154.1375 " fill="none" id="Operator-to-HSM" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1206.67,1158.7575,1214.3835,1152.6336,1208.9858,1154.3262,1207.2933,1148.9284,1206.67,1158.7575" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="1352" y="627.9781">HSM tools</text><!--MD5=[b64139e04b25806d034a9609fbc498f1]
link Operator to KS_Config--><path d="M1236.69,157.5175 C1191.61,211.6175 1099.63,310.7075 997,356.9175 C915.72,393.5175 886.7,373.0975 798,381.9175 C785.92,383.1175 699.22,383.3675 689,389.9175 C430.05,555.9575 595.75,1036.2275 641.38,1154.0775 " fill="none" id="Operator-to-KS_Config" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="643.21,1158.7675,643.6804,1148.9299,641.3998,1154.1067,636.223,1151.8262,643.21,1158.7675" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[9c6a52b0e54635debeabca1453942af9]
link Operator to CS_Config--><path d="M1295.21,126.9175 C1362.94,143.8975 1525,196.2975 1525,308.9175 C1525,308.9175 1525,308.9175 1525,1182.4175 C1525,1262.8675 1411.34,1287.0375 1343.47,1294.2975 " fill="none" id="Operator-to-CS_Config" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1338.27,1294.8275,1347.6329,1297.883,1343.2436,1294.3145,1346.8121,1289.9252,1338.27,1294.8275" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[fafc128abf58ddb02bcf3db2f67a42d9]
link Operator to IS_Config--><path d="M1295.38,133.2275 C1348.25,158.5175 1454,220.1775 1454,308.9175 C1454,308.9175 1454,308.9175 1454,958.4175 C1454,1033.9075 1409.86,1114.4975 1384.46,1154.6175 " fill="none" id="Operator-to-IS_Config" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1381.76,1158.8375,1389.9832,1153.4173,1384.4573,1154.6275,1383.2471,1149.1016,1381.76,1158.8375" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f7f4374d74a0dafac0de0dcb25a2eadc]
link IS MR Client to IS API Server--><path d="M956.34,765.2875 C960.74,806.0475 968.49,877.6575 973.14,920.7075 " fill="none" id="IS MR Client-to-IS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="973.69,925.8075,976.6894,916.4265,973.1472,920.8371,968.7367,917.2949,973.69,925.8075" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="962" y="809.9781">IPC</text><!--MD5=[30ae9fcea06dd066621be03fe1b356e0]
link CS MR Client to CS API Server--><path d="M637.97,765.1875 C632.43,820.6575 628.79,938.5775 685,1012.9175 C757.62,1108.9675 898.31,1151.6075 982.52,1169.2175 " fill="none" id="CS MR Client-to-CS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="987.49,1170.2375,979.4749,1164.5141,982.5916,1169.2349,977.8707,1172.3516,987.49,1170.2375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="686" y="961.9781">IPC</text><!--MD5=[1008acadb4c2978c020300657155410c]
link KS MR Client to KS API Server--><path d="M796.91,765.2875 C794.16,806.0475 789.32,877.6575 786.41,920.7075 " fill="none" id="KS MR Client-to-KS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="786.07,925.8075,790.6532,917.0901,786.3988,920.8184,782.6705,916.564,786.07,925.8075" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="795" y="809.9781">IPC</text><!--MD5=[37e6076a4049de8edacfa18a9f5348bb]
reverse link IS API Server to IS HLM Client--><path d="M955.52,921.3775 C935.69,891.9375 903.24,852.4375 863,834.9175 C759.9,790.0275 716.5,798.8275 610,834.9175 C557.32,852.7675 508.36,895.6975 478.81,925.6675 " fill="none" id="IS API Server-backto-IS HLM Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="958.36,925.6475,956.7113,915.9377,955.5931,921.4829,950.0478,920.3647,958.36,925.6475" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="677" y="809.9781">IPC</text><!--MD5=[071d54447f5e119d689f2347575b814f]
reverse link KS API Server to KS HLM Client--><path d="M765.24,921.1175 C747.82,891.7775 718.9,852.5675 681,834.9175 C618.55,805.8375 431.77,802.4675 371,834.9175 C335.33,853.9675 312.46,896.1675 300.17,925.6775 " fill="none" id="KS API Server-backto-KS HLM Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="767.93,925.7375,766.8543,915.9476,765.4124,921.4176,759.9424,919.9757,767.93,925.7375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="702" y="809.9781">IPC</text><!--MD5=[6804a73eee8e7028acdf854589507bfe]
link MR EH Client to MR API Server--><path d="M607.8,332.9275 C640.5,378.4975 715.53,483.0275 750.89,532.2975 " fill="none" id="MR EH Client-to-MR API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="753.98,536.5975,751.9781,526.9543,751.063,532.5366,745.4807,531.6215,753.98,536.5975" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="640" y="377.9781">IPC</text><!--MD5=[989b15a203ee7fd66555711c1bdf2e5d]
link MR EA Client to MR API Server--><path d="M770,332.9275 C770,378.2175 770,481.7675 770,531.3975 " fill="none" id="MR EA Client-to-MR API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="770,536.5975,774,527.5975,770,531.5975,766,527.5975,770,536.5975" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="771" y="377.9781">IPC</text><!--MD5=[28ddb885fa13667552cb7de1667e3457]
link MR API Server to IS MR Client--><path d="M804.45,583.1275 C826.3,597.9675 854.56,618.6075 877,639.9175 C895.5,657.4775 913.72,679.4575 927.69,697.5875 " fill="none" id="MR API Server-to-IS MR Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="930.78,701.6275,928.4814,692.0507,927.739,697.6586,922.1311,696.9162,930.78,701.6275" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4c4b7c7619f8975f5a871590d840d99f]
link MR API Server to CS MR Client--><path d="M753.53,582.9875 C731.86,612.0275 693.53,663.3775 667.94,697.6575 " fill="none" id="MR API Server-to-CS MR Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="664.89,701.7475,673.479,696.9279,667.8808,697.7407,667.068,692.1425,664.89,701.7475" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[51c6f3a2b7f646dbcbed439c36e2ccd8]
link MR API Server to KS MR Client--><path d="M773.73,582.9875 C778.6,611.7875 787.18,662.5375 792.98,696.8175 " fill="none" id="MR API Server-to-KS MR Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="793.81,701.7475,796.267,692.2101,792.9834,696.8164,788.3771,693.5327,793.81,701.7475" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[e720ecd5333c3e6747c8d16060e24f97]
link IS API Server to CS API Server--><path d="M987.29,989.2875 C1000.9,1030.1275 1024.85,1101.9575 1039.18,1144.9675 " fill="none" id="IS API Server-to-CS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1040.8,1149.8075,1041.7664,1140.0062,1039.2274,1145.0613,1034.1724,1142.5223,1040.8,1149.8075" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[be9537374aefee3a52829d99303fa4e2]
link KS API Server to HSM--><path d="M840.86,988.9675 C859.3,997.8275 880.13,1006.7575 900,1012.9175 C965.81,1033.3175 984.7,1028.8475 1053,1037.9175 C1070.27,1040.2075 1116.76,1035.8675 1131,1045.9175 C1166.85,1071.2175 1183.3,1122.0675 1190.31,1153.4875 " fill="none" id="KS API Server-to-HSM" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1191.43,1158.7375,1193.4689,1149.102,1190.3892,1153.8471,1185.6441,1150.7674,1191.43,1158.7375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="1054" y="1033.9781">aziot-keys</text><!--MD5=[0ec0b1c00808d2d43efbd3f658751262]
link IS API Server to IS_Config--><path d="M1030.68,989.0275 C1049.49,998.3375 1071.14,1007.5275 1092,1012.9175 C1119.38,1019.9875 1193.45,1008.7975 1219,1020.9175 C1280.5,1050.0875 1328.74,1117.2075 1351.93,1154.4075 " fill="none" id="IS API Server-to-IS_Config" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1354.63,1158.7875,1353.3289,1149.025,1352.0135,1154.5268,1346.5117,1153.2114,1354.63,1158.7875" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[34ec41cfc1c7b579f14b0532db03187f]
link CS API Server to CS_Config--><path d="M1106.14,1212.9875 C1121.21,1221.0375 1137.62,1229.5275 1153,1236.9175 C1183.19,1251.4275 1217.73,1266.2775 1245.07,1277.6275 " fill="none" id="CS API Server-to-CS_Config" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1249.74,1279.5675,1242.9598,1272.4241,1245.1217,1277.6516,1239.8942,1279.8135,1249.74,1279.5675" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[1fd5ab5a4360626f892f5df4f4d73889]
link KS API Server to KS_Config--><path d="M765.65,989.2875 C739.47,1033.3075 691.88,1113.3475 667.42,1154.4875 " fill="none" id="KS API Server-to-KS_Config" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="664.84,1158.8175,672.8782,1153.1266,667.3957,1154.52,666.0022,1149.0375,664.84,1158.8175" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[6437316005e372b013bcebfc39248628]
reverse link IoTHub Gateway to IS API Server--><path d="M958.36,155.2075 C972.97,171.8275 988.46,192.8875 997,214.9175 C1089.28,453.1275 1063.92,536.1375 1027,788.9175 C1019.83,838.0175 1001.42,892.7175 989.06,925.8475 " fill="none" id="IoTHub Gateway-backto-IS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="954.67,151.0775,957.6797,160.4553,957.9998,154.8075,963.6476,155.1276,954.67,151.0775" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="1061" y="564.4781">HTTPS</text><!--MD5=[f062dee797d7b0105199cffe6fb14117]
link IS API Server to KS API Server--><path d="M916.29,957.4175 C896.01,957.4175 873.27,957.4175 852.45,957.4175 " fill="none" id="IS API Server-to-KS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="847.2,957.4175,856.2,961.4175,852.2,957.4175,856.2,953.4175,847.2,957.4175" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="872.75" y="950.4781">IPC</text><!--MD5=[e067edb8b6787edeb92255ee41180f85]
reverse link PKI Service to CS API Server--><path d="M1145.11,993.8775 C1123.36,1036.9875 1087.02,1109.0175 1066.44,1149.8075 " fill="none" id="PKI Service-backto-CS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1147.43,989.2875,1139.8035,995.5194,1145.1768,993.7511,1146.9451,999.1245,1147.43,989.2875" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="1130" y="1033.9781">HTTPS (EST)</text><!--MD5=[1ba61940d09e9bcc638ddaa746e5f6f8]
link IoTHub Gateway to IoTHub EH Client--><path d="M844.71,125.2975 C758.69,133.5475 618.82,155.6875 514,214.9175 C484.34,231.6775 458.19,261.0675 441.63,282.5375 " fill="none" id="IoTHub Gateway-IoTHub EH Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="438.44,286.7175,447.07,281.9716,441.4651,282.7365,440.7002,277.1316,438.44,286.7175" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="849.79,124.8175,840.4615,121.6585,844.811,125.2754,841.1941,129.6249,849.79,124.8175" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="565" y="202.9781">AMQP (EH Module)</text><!--MD5=[cbcbca9f985bb6aa0d9e9d43e5dd7433]
link IoTHub Gateway to IoTHub HLM Client--><path d="M844.8,124.6075 C660.05,136.6275 212,179.1575 212,308.9175 C212,308.9175 212,308.9175 212,734.4175 C212,811.0175 161.56,890.2175 131.97,930.0975 " fill="none" id="IoTHub Gateway-IoTHub HLM Client" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="128.82,934.2975,137.42,929.4975,131.82,930.2975,131.02,924.6975,128.82,934.2975" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="849.92,124.2775,840.6862,120.8517,844.9299,124.5921,841.1895,128.8358,849.92,124.2775" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="213" y="564.4781">AMQP (HL Module)</text><!--MD5=[847749b71113e909cc8a19318a9f9a5c]
reverse link DPS Gateway to IS API Server--><path d="M1197.57,767.2275 C1152.97,788.8875 1101.36,814.5875 1092,821.9175 C1053.67,851.9575 1018.72,896.3575 997.66,925.8175 " fill="none" id="DPS Gateway-backto-IS API Server" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1202.14,765.0075,1192.2968,765.3417,1197.6425,767.1921,1195.792,772.5377,1202.14,765.0075" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="1138" y="809.9781">HTTPS</text><!--MD5=[a20d16dcaadd67f259e89e744d6fba35]
reverse link IoTHub Gateway to EA Runtime--><path d="M923,156.1675 C923,194.6475 923,254.6275 923,286.7775 " fill="none" id="IoTHub Gateway-backto-EA Runtime" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="923,151.1275,919,160.1275,923,156.1275,927,160.1275,923,151.1275" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="924" y="202.9781">HTTPS</text><!--MD5=[e5f1c426033a759b4be09aed4fe0e99d]
@startuml
title Data Flow - new architecture

actor Operator
cloud "DPS Service" {
    [DPS Gateway] <<service>>
}

cloud "PKI" {
    [PKI Service] <<service>>
}

cloud "IoT Hub Service" {
    [IoTHub Gateway] <<service>>
}

node "Identity Service" <<new>> {
    [IS API Server] <<newclient>>
}

node "Key Service" <<new>> {
    [KS API Server] <<newclient>>
    [KS API Server] <<newclient>>
}

node "Certificate Service" <<new>> {
    [CS API Server] <<newclient>>
}

node "Edge Module Runtime" <<modified>> {
    folder "MR Legacy Service" {
        [MR API Server]
    }
    [IS MR Client] <<newclient>>
    [CS MR Client] <<newclient>>
    [KS MR Client] <<newclient>>
}
node "Edge Agent" {
    [EA Runtime]
    [MR EA Client]
}
node "Host-level module" {
    [IS HLM Client] <<newclient>>
    [KS HLM Client] <<newclient>>
    [IoTHub HLM Client]
}
node "Edge Hub" {
    [MR EH Client]
    [IoTHub EH Client]
}

database "HSM"
database "KS_Config"
database "CS_Config"
database "IS_Config"


Operator -right-> [DPS Gateway]
Operator -right-> [IoTHub Gateway]
Operator -right-> [PKI Service]
Operator -right-> HSM: HSM tools
Operator -right-> KS_Config
Operator -right-> CS_Config
Operator -right-> IS_Config

[IS MR Client] -down-> [IS API Server] : IPC
[CS MR Client] -down-> [CS API Server] : IPC
[KS MR Client] -down-> [KS API Server] : IPC
[IS HLM Client] -left-> [IS API Server] : IPC
[KS HLM Client] -left-> [KS API Server] : IPC
[MR EH Client] - -> [MR API Server] : IPC
[MR EA Client] - -> [MR API Server] : IPC

[MR API Server] -down-> [IS MR Client]
[MR API Server] -down-> [CS MR Client]
[MR API Server] -down-> [KS MR Client]
[IS API Server] -down-> [CS API Server]
[KS API Server] -down-> HSM : aziot-keys
[IS API Server] - -> IS_Config
[CS API Server] - -> CS_Config
[KS API Server] - -> KS_Config

[IS API Server] -up-> [IoTHub Gateway] : HTTPS
[IS API Server] -right-> [KS API Server] : IPC
[CS API Server] -up-> [PKI Service] : HTTPS (EST)

[IoTHub EH Client] <-up-> [IoTHub Gateway] : AMQP (EH Module)
[IoTHub HLM Client] <-up-> [IoTHub Gateway] : AMQP (HL Module)
[IS API Server] -up-> [DPS Gateway] : HTTPS

[EA Runtime] -up-> [IoTHub Gateway] : HTTPS

skinparam node {
	backgroundColor<<new>> Magenta
	backgroundColor<<modified>> Yellow
}

skinparam component {
    backgroundColor White
    backgroundColor<<newclient>> Cyan
    backgroundColor<<modified>> Yellow
    backgroundColor<<service>> White
}

@enduml

PlantUML version 1.2020.17(Sat Sep 19 05:30:11 PDT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>